<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 1 Visualization | Preceptor’s Primer for Bayesian Data Science</title>
<meta name="author" content="David Kane">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.8/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="libs/plotly-binding-4.9.3/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script><script src="libs/rglWebGL-binding-0.106.8/rglWebGL.js"></script><link href="libs/rglwidgetClass-0.106.8/rgl.css" rel="stylesheet">
<script src="libs/rglwidgetClass-0.106.8/rglClass.min.js"></script><script src="libs/CanvasMatrix4-0.106.8/CanvasMatrix.min.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Preceptor’s Primer for Bayesian Data Science</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="preamble.html">Preamble</a></li>
<li><a class="" href="getting-started.html">Getting Started</a></li>
<li><a class="active" href="visualization.html"><span class="header-section-number">1</span> Visualization</a></li>
<li><a class="" href="wrangling.html"><span class="header-section-number">2</span> Wrangling</a></li>
<li><a class="" href="data.html"><span class="header-section-number">3</span> Data</a></li>
<li><a class="" href="rubin-causal-model.html"><span class="header-section-number">4</span> Rubin Causal Model</a></li>
<li><a class="" href="probability.html"><span class="header-section-number">5</span> Probability</a></li>
<li><a class="" href="one-parameter.html"><span class="header-section-number">6</span> One Parameter</a></li>
<li><a class="" href="two-parameters.html"><span class="header-section-number">7</span> Two Parameters</a></li>
<li><a class="" href="three-parameters.html"><span class="header-section-number">8</span> Three Parameters</a></li>
<li><a class="" href="four-parameters.html"><span class="header-section-number">9</span> Four Parameters</a></li>
<li><a class="" href="five-parameters.html"><span class="header-section-number">10</span> Five Parameters</a></li>
<li><a class="" href="n-parameters.html"><span class="header-section-number">11</span> N Parameters</a></li>
<li><a class="" href="tools.html">Tools</a></li>
<li><a class="" href="functions.html">Functions</a></li>
<li><a class="" href="maps.html">Maps</a></li>
<li><a class="" href="ipums.html">IPUMS</a></li>
<li><a class="" href="animation.html">Animation</a></li>
<li><a class="" href="set-up-for-working-on-the-primer.html">Set Up for Working on The Primer</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/PPBDS/primer">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="visualization" class="section level1" number="1">
<h1>
<span class="header-section-number">1</span> Visualization<a class="anchor" aria-label="anchor" href="#visualization"><i class="fas fa-link"></i></a>
</h1>
<p>Everyone loves visualizations.</p>
<!-- Re-read the chapter and add a bunch of comments with your initials. KX: -->
<!-- Read Chapter 5 and 6 and 7. -->
<!-- Fix opening graph so that it looks nicer.  Or maybe change it completely? e.g,,-->
<!-- Learn about tutorials. Do the same create_from_github. Read instructions.Rmd. Start Visualization-D, which is like Visualization-C, except better. This is harder then it looks. -->
<!-- Would be nice if the plot featured a statistical measure of some kind (maybe a 95% confidence interval) so that we have a motivation for learning about distributions. Probably need a very different plot. Maybe something political? Election 2020? -->
<!-- Plot should be much cooler, perhaps even using bigger data. And an associated map. Precinct level voting changes 2012 -> 2016 -> 2020, perhaps. But still needs to be something which we can easily use with plotly. Necessary for it to be animateable? -->
<!-- Old stuff: -->
<!-- New section on cool packages. gghighlights, ggsides, -->
<!-- Add section which explains plotly. -->
<!-- Switch all ifelse to if_else -->
<!-- Should discuss `group` aesthetic, especially for line plots. -->
<!-- Better explain Tidyverse. -->
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-32-1.png" width="100%"></div>
<p>Once you have read this chapter, and completed the associated tutorials, you will be able to create graphics like this one with your data. Join us on the journey.</p>
<!-- Fix the graph. The subtitle overlapping with the title isn't great aesthetically and also probably isn't the best "hey look pretty graphs" appeal -->
<div id="getting-started-1" class="section level2" number="1.1">
<h2>
<span class="header-section-number">1.1</span> Getting Started<a class="anchor" aria-label="anchor" href="#getting-started-1"><i class="fas fa-link"></i></a>
</h2>
<p>This chapter focuses on <strong>ggplot2</strong>, one of the core packages in the <strong>tidyverse</strong>. To access the datasets, help pages, and functions that we will use in this chapter, load the tidyverse:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<p>That one line of code loads all the packages associated with the <strong>tidyverse</strong>, packages which you will use in almost every data analysis. The first time you load the tidyverse, R will report which functions from the tidyverse conflict with functions in base R or with other packages you may have loaded. (We hide these and other messages in this book because they are ugly.)</p>
<p>You might get this error message:</p>
<pre><code>Error in library(tidyverse) : there is no package called ‘tidyverse’</code></pre>
<p>If that happens, you need to install the package:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></code></pre></div>
<p>Then, run <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code> once again.</p>
<div id="how-do-i-code-in-r" class="section level3" number="1.1.1">
<h3>
<span class="header-section-number">1.1.1</span> How do I code in R?<a class="anchor" aria-label="anchor" href="#how-do-i-code-in-r"><i class="fas fa-link"></i></a>
</h3>
<p>R is an <a href="https://en.wikipedia.org/wiki/Interpreted_language">interpreted language</a>. This means you have to type in commands written in <em>R code</em>. In other words, you have to code/program in R. We use the terms “coding” and “programming” interchangeably.</p>
<!-- DK: This is awkward. When are we teaching about R Markdown? -->
<p>If you want a slower introduction than we are providing here, check out the short book, <a href="https://rbasics.netlify.com/"><em>Getting Used to R, RStudio, and R Markdown</em></a>. <span class="citation"><a href="references.html#ref-usedtor2016" role="doc-biblioref">Ismay and Kennedy</a> (<a href="references.html#ref-usedtor2016" role="doc-biblioref">2016</a>)</span> include screencast recordings that you can follow along and pause as you learn. They include an introduction to R Markdown, a tool used for reproducible research in R.</p>
<p><strong>Remember:</strong> <em>You need to practice every day.</em> Learning to code/program is like learning a foreign language. Daily practice is the <em>sine qua non</em> for progress.</p>
</div>
<div id="terminology" class="section level3" number="1.1.2">
<h3>
<span class="header-section-number">1.1.2</span> Terminology<a class="anchor" aria-label="anchor" href="#terminology"><i class="fas fa-link"></i></a>
</h3>
<!-- DK: Should have an entire tutorial devoted to this section, hitting every single section. -->
<p>We use a different font to distinguish regular text from <code>computer_code</code>.</p>
<ul>
<li><p><em>Console pane</em>: where you enter in commands in RStudio.</p></li>
<li><p><em>Running code</em>: the act of telling R to put our code into action.</p></li>
<li><p><em>Objects</em>: where values are stored in R. You can <em>assign</em> values to objects and display the contents of objects. Use the assignment operator <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> to do so. You can choose almost any name you like for an object, as long as the name does not begin with a number or a special character like <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code>, <code><a href="https://rdrr.io/r/base/Arithmetic.html">*</a></code>, <code><a href="https://rdrr.io/r/base/Arithmetic.html">-</a></code>, <code><a href="https://rdrr.io/r/base/Arithmetic.html">/</a></code>, <code><a href="https://rdrr.io/r/base/Arithmetic.html">^</a></code>, etc.</p></li>
</ul>
<p>For example we can save the result of <code>4 + 3</code> to an object named <code>x</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">4</span> <span class="op">+</span> <span class="fl">3</span></code></pre></div>
<p>Now, whenever we type <code>x</code>, the value of 4 + 3 will appear:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<ul>
<li>
<em>Data types</em>: integers, doubles/numerics, logicals, and characters.
<ul>
<li>Integers are values like -1, 0, 2, 4092.</li>
<li>Doubles or numerics are a larger set of values containing both the integers but also fractions and decimal values like -24.932 and 0.8.</li>
<li>Logicals are either <code>TRUE</code> or <code>FALSE</code>. Characters are text like “cabbage,” “Hamilton,” or “The Wire is the greatest TV show ever.”</li>
<li>Characters are often denoted with the quotation marks around them.</li>
</ul>
</li>
<li>
<em>Vectors</em>: a collection of values. These are created using the <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> function, where the <code>c</code> stands for <strong>c</strong>ombine.</li>
</ul>
<p>For example, <code><a href="https://rdrr.io/r/base/c.html">c(2, 4, 6, 8)</a></code> creates a four element vector of numeric values.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<ul>
<li>
<em>Factors</em>: used to represent “categorical data.” We will go into detail about these and other variable types in Chapter <a href="wrangling.html#wrangling">2</a>.</li>
</ul>
<!-- Explain factors and categorical data more, even after reading wrangling I'm still somewhat unsure what it means and it might be good to have a more in-depth explanation here for those of us who aren't super familiar with data terms. Maybe just a paragraph.  --><ul>
<li>
<em>Data frames</em>: rectangular arrangements of data. Think of a <a href="https://en.wikipedia.org/wiki/Spreadsheet">spreadsheet</a>. Rows correspond to <em>units</em>. Columns correspond to <em>variables</em>. Modern data frames are called <em>tibbles</em>.</li>
</ul>
<!-- It's somewhat unclear what "modern data frame" means, maybe elaborate. --><ul>
<li><p><em>Boolean algebra</em>: <code>TRUE/FALSE</code> statements and mathematical operators such as <code><a href="https://rdrr.io/r/base/Comparison.html">&lt;</a></code> (less than), <code><a href="https://rdrr.io/r/base/Comparison.html">&lt;=</a></code> (less than or equal to), and <code><a href="https://rdrr.io/r/base/Comparison.html">!=</a></code> (not equal to). For example, <code>4 + 2 &gt;= 3</code> will return <code>TRUE</code>, but <code>3 + 5 &lt;= 1</code> will return <code>FALSE</code>.</p></li>
<li><p><em>Inclusion</em>: Tested for with the <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> operator. For example, <code>"B" %in% c("A", "B")</code> returns <code>TRUE</code> while <code>"C" %in% c("A", "B")</code> returns <code>FALSE</code>.</p></li>
<li><p><em>Equality</em>: Tested for using <code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code>. For example, <code>2 + 1 == 3</code> compares <code>2 + 1</code> to <code>3</code> and is legal R code, returning <code>TRUE</code>. On the other hand, <code>2 + 1 = 3</code> will return an error because we can not assign one number to another.</p></li>
<li><p><em>Logical operators</em>: <code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code> representing “and” as well as <code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> representing “or.” For example, <code>(2 + 1 == 3) &amp; (2 + 1 == 4)</code> returns <code>FALSE</code> since at least one of the two parts is not <code>TRUE</code>. On the other hand, <code>(2 + 1 == 3) | (2 + 1 == 4)</code> returns <code>TRUE</code> since at least one of the two parts is <code>TRUE</code>.</p></li>
<li><p><em>Functions</em>: perform tasks, and are also called <em>commands</em>. They take in inputs called <em>arguments</em> and return outputs. You can either manually specify a function’s arguments or use the function’s <em>default values</em>.</p></li>
</ul>
<p>For example, <code><a href="https://rdrr.io/r/base/MathFun.html">sqrt(64)</a></code> is the function <code><a href="https://rdrr.io/r/base/MathFun.html">sqrt()</a></code> with 64 as its argument.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">64</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<ul>
<li><p><em>Help files</em>: provide documentation for functions and datasets. You can bring up help files by adding a <code><a href="https://rdrr.io/r/utils/Question.html">?</a></code> before the name of the object then run this in the console.</p></li>
<li><p><em>Code comments</em>: are text placed after a <code>#</code> symbol. Nothing will be run after a <code>#</code> symbol, which is useful when you include comments in your code, as you always should.</p></li>
<li><p><em>Errors, warnings, and messages</em>: generally reported in a red font. When there is an error, the code will not run. Read (and/or google) the message and try fix it. Warnings don’t prevent code from completing. For example, if you create a scatterplot based on data with two missing values, you will see this warning:</p></li>
</ul>
<pre><code>Warning message:
Removed 2 rows containing missing values (geom_point).  </code></pre>
<!-- DK: Indent this so that it is connected to the bullet point above. -->
<p>Messages are similar. In both cases, you should fix the underlying issue until the warning/message goes away.</p>
</div>
<div id="examining-trains" class="section level3" number="1.1.3">
<h3>
<span class="header-section-number">1.1.3</span> Examining <code>trains</code><a class="anchor" aria-label="anchor" href="#examining-trains"><i class="fas fa-link"></i></a>
</h3>
<p>Most data comes to us in “spreadsheet”-type format. These datasets are called <em>data frames</em> or <em>tibbles</em> in R. Let’s explore the <code>trains</code> tibble from the <strong>primer.data</strong> package. This data comes from <span class="citation"><a href="references.html#ref-enos2014" role="doc-biblioref">Enos</a> (<a href="references.html#ref-enos2014" role="doc-biblioref">2014</a>)</span>, which investigated attitudes toward immigration among Boston commuters.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">primer.data</span><span class="op">)</span>
<span class="va">trains</span></code></pre></div>
<pre><code>## # A tibble: 115 x 14
##    treatment att_start att_end gender race  liberal party     age income line   
##    &lt;fct&gt;         &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;lgl&gt;   &lt;chr&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;  
##  1 Treated          11      11 Female White FALSE   Democr…    31 135000 Framin…
##  2 Treated           9      10 Female White FALSE   Republ…    34 105000 Framin…
##  3 Treated           3       5 Male   White TRUE    Democr…    63 135000 Framin…
##  4 Treated          11      11 Male   White FALSE   Democr…    45 300000 Framin…
##  5 Control           8       5 Male   White TRUE    Democr…    55 135000 Framin…
##  6 Treated          13      13 Female White FALSE   Democr…    37  87500 Framin…
##  7 Control          13      13 Female White FALSE   Republ…    53  87500 Framin…
##  8 Treated          10      11 Male   White FALSE   Democr…    36 135000 Framin…
##  9 Control          12      12 Female White FALSE   Democr…    54 105000 Framin…
## 10 Treated           9      10 Male   White FALSE   Republ…    42 135000 Framin…
## # … with 105 more rows, and 4 more variables: station &lt;chr&gt;, hisp_perc &lt;dbl&gt;,
## #   ideology_start &lt;int&gt;, ideology_end &lt;int&gt;</code></pre>
<p>Let’s unpack this output:</p>
<ul>
<li><p>A <code>tibble</code> is a specific kind of data frame. This particular data frame has 115 rows corresponding to different <em>units</em>, meaning people in this case.</p></li>
<li><p>The tibble also has 14 columns corresponding to <em>variables</em> which describe each unit or observation.</p></li>
<li><p>We see, by default, the top 10 rows and some of the columns. You can see more (or fewer) rows and columns by using the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> command:</p></li>
</ul>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">trains</span>, n <span class="op">=</span> <span class="fl">15</span>, width <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 115 x 14
##    treatment att_start att_end gender race  liberal party        age income
##    &lt;fct&gt;         &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;lgl&gt;   &lt;chr&gt;      &lt;int&gt;  &lt;dbl&gt;
##  1 Treated          11      11 Female White FALSE   Democrat      31 135000
##  2 Treated           9      10 Female White FALSE   Republican    34 105000
##  3 Treated           3       5 Male   White TRUE    Democrat      63 135000
##  4 Treated          11      11 Male   White FALSE   Democrat      45 300000
##  5 Control           8       5 Male   White TRUE    Democrat      55 135000
##  6 Treated          13      13 Female White FALSE   Democrat      37  87500
##  7 Control          13      13 Female White FALSE   Republican    53  87500
##  8 Treated          10      11 Male   White FALSE   Democrat      36 135000
##  9 Control          12      12 Female White FALSE   Democrat      54 105000
## 10 Treated           9      10 Male   White FALSE   Republican    42 135000
## 11 Control          10       9 Female White FALSE   Democrat      33 105000
## 12 Treated          11       9 Male   White FALSE   Democrat      50 250000
## 13 Treated          13      13 Male   White FALSE   Republican    24 105000
## 14 Control           6       7 Male   White TRUE    Democrat      40  62500
## 15 Control           8       8 Male   White TRUE    Democrat      53 300000
##    line       station      hisp_perc ideology_start ideology_end
##    &lt;chr&gt;      &lt;chr&gt;            &lt;dbl&gt;          &lt;int&gt;        &lt;int&gt;
##  1 Framingham Grafton         0.0264              3            3
##  2 Framingham Southborough    0.0154              4            4
##  3 Framingham Grafton         0.0191              1            2
##  4 Framingham Grafton         0.0191              4            4
##  5 Framingham Grafton         0.0191              2            2
##  6 Framingham Grafton         0.0231              5            5
##  7 Framingham Grafton         0.0304              5            5
##  8 Framingham Grafton         0.0247              4            4
##  9 Framingham Grafton         0.0247              4            3
## 10 Framingham Grafton         0.0259              4            4
## 11 Framingham Grafton         0.0259              3            3
## 12 Framingham Grafton         0.0259              5            4
## 13 Framingham Grafton         0.0159              4            4
## 14 Framingham Grafton         0.0159              1            1
## 15 Framingham Southborough    0.0392              2            2
## # … with 100 more rows</code></pre>
<p>The <code>n</code> argument to <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> tells R the number of rows you want to see. <code>width</code> refers to the number of characters to print across the screen. Want to see every row and every column? Try:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">trains</span>, n <span class="op">=</span> <span class="cn">Inf</span>, width <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></code></pre></div>
<p><code>Inf</code> is an R object which means “infinity.”</p>
</div>
<div id="exploring-tibbles" class="section level3" number="1.1.4">
<h3>
<span class="header-section-number">1.1.4</span> Exploring tibbles<a class="anchor" aria-label="anchor" href="#exploring-tibbles"><i class="fas fa-link"></i></a>
</h3>
<p>There are many ways to get a feel for the data contained in a tibble like <code>trains</code>.</p>
<div id="view" class="section level4" number="1.1.4.1">
<h4>
<span class="header-section-number">1.1.4.1</span> <code>view()</code><a class="anchor" aria-label="anchor" href="#view"><i class="fas fa-link"></i></a>
</h4>
<p>Run <code>view(trains)</code> in the Console in RStudio, either by typing it or cutting-and-pasting it into the Console pane. Explore this tibble in the resulting pop up viewer.</p>
<p><code>view()</code> allows us to explore the different variables listed in the columns. Observe that there are many different types of variables. Some of the variables are <em>quantitative</em>. These variables are numerical in nature. Other variables here, including <code>gender</code> and <code>treatment</code>, are <em>categorical</em>.</p>
<!-- Explain the difference between categorical and quantitative variables.  -->
</div>
<div id="glimpse" class="section level4" number="1.1.4.2">
<h4>
<span class="header-section-number">1.1.4.2</span> <code>glimpse()</code><a class="anchor" aria-label="anchor" href="#glimpse"><i class="fas fa-link"></i></a>
</h4>
<p>We can also explore a tibble by using <code>glimpse()</code>.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">glimpse</span><span class="op">(</span><span class="va">trains</span><span class="op">)</span></code></pre></div>
<pre><code>## Rows: 115
## Columns: 14
## $ treatment      &lt;fct&gt; Treated, Treated, Treated, Treated, Control, Treated, C…
## $ att_start      &lt;dbl&gt; 11, 9, 3, 11, 8, 13, 13, 10, 12, 9, 10, 11, 13, 6, 8, 1…
## $ att_end        &lt;dbl&gt; 11, 10, 5, 11, 5, 13, 13, 11, 12, 10, 9, 9, 13, 7, 8, 1…
## $ gender         &lt;chr&gt; "Female", "Female", "Male", "Male", "Male", "Female", "…
## $ race           &lt;chr&gt; "White", "White", "White", "White", "White", "White", "…
## $ liberal        &lt;lgl&gt; FALSE, FALSE, TRUE, FALSE, TRUE, FALSE, FALSE, FALSE, F…
## $ party          &lt;chr&gt; "Democrat", "Republican", "Democrat", "Democrat", "Demo…
## $ age            &lt;int&gt; 31, 34, 63, 45, 55, 37, 53, 36, 54, 42, 33, 50, 24, 40,…
## $ income         &lt;dbl&gt; 135000, 105000, 135000, 300000, 135000, 87500, 87500, 1…
## $ line           &lt;chr&gt; "Framingham", "Framingham", "Framingham", "Framingham",…
## $ station        &lt;chr&gt; "Grafton", "Southborough", "Grafton", "Grafton", "Graft…
## $ hisp_perc      &lt;dbl&gt; 0.026, 0.015, 0.019, 0.019, 0.019, 0.023, 0.030, 0.025,…
## $ ideology_start &lt;int&gt; 3, 4, 1, 4, 2, 5, 5, 4, 4, 4, 3, 5, 4, 1, 2, 2, 3, 4, 2…
## $ ideology_end   &lt;int&gt; 3, 4, 2, 4, 2, 5, 5, 4, 3, 4, 3, 4, 4, 1, 2, 3, 3, 1, 2…</code></pre>
<p>We see the first few values for each variable in a row after the variable name. In addition, the <em>data type</em> of the variable is given immediately after each variable’s name, inside <code>&lt; &gt;</code>.</p>
<p><code>dbl</code> refers to “double,” which is computer terminology for quantitative/numerical variables. <code>int</code> is for “integer.” <code>fct</code> is refers to a “factor,” a variable that is “nominal,” meaning a member of a smallish number of categories. <code>chr</code> is for character data.</p>
<!-- HL: the definitions for these terms feel sort of all over the place, maybe the terms + the abbreviations R uses should just all be in the glossary so people have one place to reference when they're confused -->
</div>
<div id="operator" class="section level4" number="1.1.4.3">
<h4>
<span class="header-section-number">1.1.4.3</span> <code>$</code> operator<a class="anchor" aria-label="anchor" href="#operator"><i class="fas fa-link"></i></a>
</h4>
<p>The <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> operator allows us to extract a single variable from a tibble and return it as a vector.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span><span class="op">$</span><span class="va">age</span></code></pre></div>
<pre><code>##   [1] 31 34 63 45 55 37 53 36 54 42 33 50 24 40 53 50 33 33 32 57 41 36 43 25 41
##  [26] 33 44 46 41 28 36 37 38 48 20 52 38 45 55 38 45 44 36 29 42 43 54 39 31 50
##  [51] 60 67 54 44 50 20 57 25 60 44 35 54 52 47 60 47 22 56 50 21 29 45 46 42 23
##  [76] 29 60 41 30 61 21 46 53 45 46 63 21 31 35 22 68 27 22 30 59 56 32 35 23 60
## [101] 50 31 43 30 54 52 52 50 37 27 55 42 68 52 50</code></pre>
</div>
</div>
</div>
<div id="basic-plots" class="section level2" number="1.2">
<h2>
<span class="header-section-number">1.2</span> Basic Plots<a class="anchor" aria-label="anchor" href="#basic-plots"><i class="fas fa-link"></i></a>
</h2>
<p>There are three essential components to a plot:</p>
<ul>
<li>
<code>data</code>: the dataset containing the variables of interest.</li>
<li>
<code>geom</code>: the geometric object to display, e.g., scatterplot, line, bar.</li>
<li>
<code>aes</code>: aesthetic attributes of the geometric object. The most important are the names of the variables that should be on the x and y axes. Additional attributes include color and size. Aesthetic attributes are <em>mapped</em> to variables in the dataset.</li>
</ul>
<p>Consider a basic scatterplot using data from <span class="citation"><a href="references.html#ref-enos2014" role="doc-biblioref">Enos</a> (<a href="references.html#ref-enos2014" role="doc-biblioref">2014</a>)</span> for 115 Boston commuters.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">trains</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, 
                     y <span class="op">=</span> <span class="va">income</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-44-1.png" width="100%"></div>
<p>Notice how <code>data</code> and <code>aes</code> are specified in the call to <code>ggplot()</code>, followed by our choice of geom.</p>
<p>Plots are composed of <em>layers</em>, combined using the <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> sign. The most essential layer specifies which type of <code>geom</code>etric object we want the plot to involve: points, lines, bars, and others. In our graph above, the geom we used is <code>geom_point()</code>.</p>
<p>The <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> sign comes at the end of the code line and not at the beginning. When adding layers to a plot, start a new line after the <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> so that the code for each layer is on a new line.</p>
<div id="geom_point" class="section level3" number="1.2.1">
<h3>
<span class="header-section-number">1.2.1</span> <code>geom_point()</code><a class="anchor" aria-label="anchor" href="#geom_point"><i class="fas fa-link"></i></a>
</h3>
<p><em>Scatterplots</em>, also called <em>bivariate plots</em>, allow you to visualize the <em>relationship</em> between two numerical variables.</p>
<p>Recall our scatterplot from above.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">trains</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, 
                     y <span class="op">=</span> <span class="va">income</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-45-1.png" width="100%"></div>
<p>Let’s break down this code, piece-by-piece.</p>
<ul>
<li><p>The <code>data</code> argument is set to <code>trains</code> via <code>data = trains</code>.</p></li>
<li><p>The <code>aes</code>thetic <code>mapping</code> is set via <code>mapping = aes(x = age, y = income)</code>. Here, we map <code>age</code> to the <code>x</code> axis and <code>income</code> to the <code>y</code> axis.</p></li>
<li><p>The <code>geom</code>etric object is specified using <code>geom_point()</code>, telling R we want a scatterplot. We added a layer using the <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> sign.</p></li>
</ul>
<p>If we do not specify the <code>geom</code>etric object, we have a blank plot:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">trains</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, 
                     y <span class="op">=</span> <span class="va">income</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-46-1.png" width="100%"></div>
<p>In addition to mapping variables to the <code>x</code> and <code>y</code> axes, we can also map variables to <code>color</code>.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">trains</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, 
                     y <span class="op">=</span> <span class="va">income</span>,
                     color <span class="op">=</span> <span class="va">party</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-47-1.png" width="100%"></div>
<!-- Size here? -->
<p>We use the function <code>labs()</code> to add a plot title, axis labels, subtitles, and captions to our graph. By default, R simply uses the names of variables for axes and legends. Add better titles and labels.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">trains</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, 
                     y <span class="op">=</span> <span class="va">income</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Age and Income Among Boston Commuters"</span>,
       subtitle <span class="op">=</span> <span class="st">"Older commuters don't seem to make more money"</span>,
       x <span class="op">=</span> <span class="st">"Age"</span>,
       y <span class="op">=</span> <span class="st">"Income"</span>,
       caption <span class="op">=</span> <span class="st">"Data source: Enos (2014)"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-48-1.png" width="100%"></div>
<p>Note that like with <code>geom</code>s, we add a layer using <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> when creating <code>labs()</code>for our plot. In general, every plot should give a title and axes labels. You should also add a <code>subtitle</code>, the purpose of which is to give a short “main point” of the graphic. What do you want the viewer to notice? You should also provide the source for the data, usually via the <code>caption</code> argument.</p>
<p>Let’s now take a tour of some of the more useful geoms.</p>
</div>
<div id="geom_jitter" class="section level3" number="1.2.2">
<h3>
<span class="header-section-number">1.2.2</span> <code>geom_jitter()</code><a class="anchor" aria-label="anchor" href="#geom_jitter"><i class="fas fa-link"></i></a>
</h3>
<p>Consider a different scatter plot using the <code>trains</code> data.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">trains</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">att_start</span>, 
                     y <span class="op">=</span> <span class="va">att_end</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Immigration Attitudes Among Boston Commuters"</span>,
       subtitle <span class="op">=</span> <span class="st">"Attitudes did not change much after the experiment"</span>,
       x <span class="op">=</span> <span class="st">"Attitude Before Experiment"</span>,
       y <span class="op">=</span> <span class="st">"Attitude After Experiment"</span>,
       caption <span class="op">=</span> <span class="st">"Data source: Enos (2014)"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-49-1.png" width="100%"></div>
<p>The problem with this display is “overplotting.” Because attitudes are measured as integers, we do not know if a given point represents just one person or a dozen. There are two methods we can use to address overplotting: transparency and jitter.</p>
<p><strong>Method 1: Changing the transparency</strong></p>
<p>We can change the transparency/opacity of the points by using the <code>alpha</code> argument within <code>geom_point()</code>. The <code>alpha</code> argument can be set to any value between <code>0</code> and <code>1</code>, where <code>0</code> sets the points to be 100% transparent and <code>1</code> sets the points to be 100% opaque. By default, <code>alpha</code> is set to <code>1</code>.</p>
<p>Use a new <code>alpha</code> value to the scatterplot.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">trains</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">att_start</span>, 
                     y <span class="op">=</span> <span class="va">att_end</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Immigration Attitudes Among Boston Commuters"</span>,
       subtitle <span class="op">=</span> <span class="st">"Attitudes did not change much after the experiment"</span>,
       x <span class="op">=</span> <span class="st">"Attitude Before Experiment"</span>,
       y <span class="op">=</span> <span class="st">"Attitude After Experiment"</span>,
       caption <span class="op">=</span> <span class="st">"Data source: Enos (2014)"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-50-1.png" width="100%"></div>
<p>Note that there is no <code>aes()</code> surrounding <code>alpha = 0.2</code>. This is because we are not mapping a variable to an aesthetic attribute, but only changing the default setting of <code>alpha</code>.</p>
<p><strong>Method 2: Jittering the points</strong></p>
<p>We can also decide to jitter the points on the plot. We do this by replacing <code>geom_point()</code> with <code>geom_jitter()</code>. Keep in mind that jittering is strictly a visualization tool; even after creating a jittered scatterplot, the original values saved in the data frame remain unchanged.</p>
<p>In order to specify how much jitter to add, we use the <code>width</code> and <code>height</code> arguments to <code>geom_jitter()</code>. This corresponds to how hard you’d like to shake the plot in horizontal x-axis units and vertical y-axis units, respectively. It is important to add just enough jitter to break any overlap in points, but not to the extent where you alter the original pattern in points.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">trains</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">att_start</span>, 
                     y <span class="op">=</span> <span class="va">att_end</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_jitter</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Immigration Attitudes Among Boston Commuters"</span>,
       subtitle <span class="op">=</span> <span class="st">"Attitudes did not change much after the experiment"</span>,
       x <span class="op">=</span> <span class="st">"Attitude Before Experiment"</span>,
       y <span class="op">=</span> <span class="st">"Attitude After Experiment"</span>,
       caption <span class="op">=</span> <span class="st">"Data source: Enos (2014)"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-51-1.png" width="100%"></div>
<p>When deciding whether to jitter a scatterplot or use the <code>alpha</code> argument to <code>geom_point()</code>, know that there is no single right answer. We suggest you play around with both methods to see which one better emphasizes the point you are trying to make.</p>
</div>
<div id="geom_line" class="section level3" number="1.2.3">
<h3>
<span class="header-section-number">1.2.3</span> <code>geom_line()</code><a class="anchor" aria-label="anchor" href="#geom_line"><i class="fas fa-link"></i></a>
</h3>
<p>Linegraphs show the relationship between two numerical variables when the variable on the x-axis, also called the <em>explanatory</em>, <em>predictive</em>, or <em>independent</em> variable, is of a sequential nature. In other words, there is an inherent ordering to the variable.</p>
<div class="inline-figure"><img src="https://imgs.xkcd.com/comics/decline.png" width="100%"></div>
<p>The most common examples of linegraphs have some notion of time on the x-axis: hours, days, weeks, years, etc. Since time is sequential, we connect consecutive observations of the variable on the y-axis with a line. Linegraphs that have some notion of time on the x-axis are also called <em>time series</em> plots.</p>
<p>Let’s plot the median duration of unemployment in the United States over the last 50 years.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">economics</span>,
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">uempmed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Unemployment Duration in the United States: 1965 -- 2015"</span>,
       subtitle <span class="op">=</span> <span class="st">"Dramatic increase in duration after the Great Recesssion"</span>,
       x <span class="op">=</span> <span class="st">"Date"</span>,
       y <span class="op">=</span> <span class="st">"Median Duration in Weeks"</span>,
       caption <span class="op">=</span> <span class="st">"Source: FRED Economic Data"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-53-1.png" width="100%"></div>
<p>Almost every aspect of the code used to create this plot is identical to our scatter plots, except for the geom we used.</p>
</div>
<div id="geom_histogram" class="section level3" number="1.2.4">
<h3>
<span class="header-section-number">1.2.4</span> <code>geom_histogram()</code><a class="anchor" aria-label="anchor" href="#geom_histogram"><i class="fas fa-link"></i></a>
</h3>
<!-- DK: All awk. Rewrite. Passing by position is important! -->
<p>A histogram is a plot that visualizes the <em>distribution</em> of a numerical value.</p>
<ol style="list-style-type: decimal">
<li>We first cut up the x-axis into a series of <em>bins</em>, where each bin represents a range of values.</li>
<li>For each bin, we count the number of observations that fall in the range corresponding to that bin.</li>
<li>We draw a bar whose height indicates the corresponding count.</li>
</ol>
<!-- HL: I feel like this stuff below about you not needing to specify the arguments is sort of randomly dropped in the middle here, maybe this could be added to an "additional info" section at the bottom? isn't really crucial to the lesson after all. Agreed. --><p>Let’s consider the <code>income</code> variable from the the <code>trains</code> tibble. Pay attention to how we have changed the two arguments to <code>ggplot()</code>. We have removed <code>data =</code> and <code>mapping =</code>. The code still works because R functions allow for passing in arguments by <em>position</em>. The first argument to <code>ggplot()</code> is the <code>data</code>. We don’t need to tell R that <code>trains</code> is the value for <code>data</code>. R assumes that it is because we passed it in as the first argument. Similarly, the second argument to <code>ggplot()</code> is <code>mapping</code>, so R assumes that <code>aes(x = income)</code> is the value we want for <code>mapping</code> because it is the second item passed in.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">trains</span>, 
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">income</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-54-1.png" width="100%"></div>
<p>Note the message printed above:</p>
<blockquote>
<p><code>stat_bin()</code> using <code>bins = 30</code>. Pick better value with <code>binwidth</code>.</p>
</blockquote>
<p>You would get the same message if you ran this code yourself. Try it!</p>
<p>The message is telling us that the histogram was constructed using <code>bins = 30</code> for 30 equally spaced bins. This is the default value. Unless you override this default number of bins with a number you specify, R will choose 30 by default. Because this is an important aspect of making a histogram, R insists on informing you with this message. You make this message go away by specifying the <code>bin</code> number yourself, as you should always do.</p>
<p>Let’s specify <code>bins</code> and also add some labels.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">trains</span>, 
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">income</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Income Among Boston Commuter"</span>,
       subtitle <span class="op">=</span> <span class="st">"Why are there so few people with `middle' incomes?"</span>,
       x <span class="op">=</span> <span class="st">"Income"</span>,
       y <span class="op">=</span> <span class="st">"Count"</span>,
       caption <span class="op">=</span> <span class="st">"Data source: Enos (2014)"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-55-1.png" width="100%"></div>
<p>Unlike scatterplots and linegraphs, there is now only one variable being mapped in <code>aes()</code>. Here, that variable is <code>income</code>. The y-aesthetic of a histogram, the count of the observations in each bin, gets computed for you automatically. Furthermore, the geometric object layer is now a <code>geom_histogram()</code>.</p>
<p>We can use the <code>fill</code> argument to change the color of the actual bins. Let’s set <code>fill</code> to “steelblue.”</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">trains</span>, 
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">income</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">50</span>,
                 fill <span class="op">=</span> <span class="st">"steelblue"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Income Among Boston Commuter"</span>,
       subtitle <span class="op">=</span> <span class="st">"Why are there so few people with `middle' incomes?"</span>,
       x <span class="op">=</span> <span class="st">"Income"</span>,
       y <span class="op">=</span> <span class="st">"Count"</span>,
       caption <span class="op">=</span> <span class="st">"Data source: Enos (2014)"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-56-1.png" width="100%"></div>
<p>We can also adjust the number of bins in our histogram in one of two ways:</p>
<ol style="list-style-type: decimal">
<li><p>By adjusting the number of bins via the <code>bins</code> argument to <code>geom_histogram()</code>.</p></li>
<li><p>By adjusting the width of the bins via the <code>binwidth</code> argument to <code>geom_histogram()</code>.</p></li>
</ol>
<p>In this data, however, there are not many unique values for <code>income</code>, so neither approach will have much effect. Replace <code>income</code> with <code>age</code> if you want to experiment with these options.</p>
</div>
<div id="geom_bar" class="section level3" number="1.2.5">
<h3>
<span class="header-section-number">1.2.5</span> <code>geom_bar()</code><a class="anchor" aria-label="anchor" href="#geom_bar"><i class="fas fa-link"></i></a>
</h3>
<p><code>geom_bar()</code> visualizes the distribution of a categorical variable. This is a simpler task than creating a histogram, as we are simply counting different categories within a categorical variable, also known as the <em>levels</em> of the categorical variable. Often the best way to visualize these different counts, also known as <em>frequencies</em>, is with a barplot.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">trains</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">race</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-57-1.png" width="100%"></div>
<p><code>geom_col()</code> is very similar to <code>geom_bar()</code>, except that <code>geom_col()</code> requires you to calculate the number of observations in each category ahead of time. <code>geom_bar()</code> does the calculation for you.</p>
<!-- HL: could we elaborate on geom_col() more? give it its own mini section bc I think it's distinct enough and people might not understand why you need to use geom_col if it's so similar to geom_bar. Add a code chunk with does group_by and summarize and then pipes to geom_col. See new section in tutorials. Agreed. -->
<div id="no-pie-charts" class="section level4" number="1.2.5.1">
<h4>
<span class="header-section-number">1.2.5.1</span> No pie charts!<a class="anchor" aria-label="anchor" href="#no-pie-charts"><i class="fas fa-link"></i></a>
</h4>
<p>One of the most common plots used to visualize the distribution of categorical data is the pie chart. While they may seem harmless enough, pie charts actually present a problem in that humans are unable to judge angles well. <span class="citation"><a href="references.html#ref-robbins2013" role="doc-biblioref">Robbins</a> (<a href="references.html#ref-robbins2013" role="doc-biblioref">2013</a>)</span> argues that we overestimate angles greater than 90 degrees and we underestimate angles less than 90 degrees. In other words, it is difficult for us to determine the relative size of one piece of the pie compared to another. <em>Do not use pie charts.</em></p>
</div>
<div id="two-categorical-variables" class="section level4" number="1.2.5.2">
<h4>
<span class="header-section-number">1.2.5.2</span> Two categorical variables<a class="anchor" aria-label="anchor" href="#two-categorical-variables"><i class="fas fa-link"></i></a>
</h4>
<p>Another use of barplots is to visualize the <em>joint</em> distribution of two categorical variables. (See Chapter <a href="probability.html#probability">5</a> for the definition of a joint distribution.) Let’s look at <code>race</code>, as well as <code>treatment</code>, in the <code>trains</code> data by using the <code>fill</code> argument inside the <code>aes()</code> aesthetic mapping. Recall the <code>fill</code> aesthetic corresponds to the color used to fill the bars.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">trains</span>, 
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">race</span>, fill <span class="op">=</span> <span class="va">treatment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-58-1.png" width="100%"></div>
<p>This is an example of a <em>stacked barplot</em>. While simple to make, in certain aspects it is not ideal. For example, it is difficult to compare the heights of the different colors between the bars, corresponding to comparing the number of people of different races within each region.</p>
<p>An alternative to stacked barplots are <em>side-by-side barplots</em>, also known as <em>dodged barplots</em>. The code to create a side-by-side barplot includes a <code>position = "dodge"</code> argument added inside <code>geom_bar()</code>. In other words, we are overriding the default barplot type, which is a <em>stacked</em> barplot, and specifying it to be a side-by-side barplot instead.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">trains</span>, 
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">race</span>, fill <span class="op">=</span> <span class="va">treatment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_bar</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-59-1.png" width="100%"></div>
<p>Whites are over-represented in the Control group even though the <code>treatment</code> was assigned at random.</p>
</div>
</div>
<div id="geom_smooth" class="section level3" number="1.2.6">
<h3>
<span class="header-section-number">1.2.6</span> <code>geom_smooth()</code><a class="anchor" aria-label="anchor" href="#geom_smooth"><i class="fas fa-link"></i></a>
</h3>
<p>We can add trend lines to the plots we create using the <code>geom_smooth()</code> function.</p>
<!-- DK: Will handle geom_smooth().explain method, se, and formula -->
<p>Recall the following scatterplot from our previous work.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">trains</span>, 
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">att_start</span>, 
           y <span class="op">=</span> <span class="va">att_end</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Immigration Attitudes Among Boston Commuters"</span>,
       subtitle <span class="op">=</span> <span class="st">"Attitudes did not change much after the experiment"</span>,
       x <span class="op">=</span> <span class="st">"Attitude Before Experiment"</span>,
       y <span class="op">=</span> <span class="st">"Attitude After Experiment"</span>,
       caption <span class="op">=</span> <span class="st">"Data source: Enos (2014)"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-60-1.png" width="100%"></div>
<p>We can add a trend line to our graph by adding the layer <code>geom_smooth()</code>. Including trend lines allow us to visualize the relationship between <code>att_start</code> and <code>att_end</code>.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">trains</span>, 
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">att_start</span>, 
           y <span class="op">=</span> <span class="va">att_end</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Immigration Attitudes Among Boston Commuters"</span>,
       subtitle <span class="op">=</span> <span class="st">"Attitudes did not change much after the experiment"</span>,
       x <span class="op">=</span> <span class="st">"Attitude Before Experiment"</span>,
       y <span class="op">=</span> <span class="st">"Attitude After Experiment"</span>,
       caption <span class="op">=</span> <span class="st">"Data source: Enos (2014)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_smooth</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = 'loess' and formula 'y ~ x'</code></pre>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-61-1.png" width="100%"></div>
<p>Note the message. R is telling us that we need to specify the <code>method</code> and <code>formula</code> argument, just the way it told us to provide the <code>bins</code> argument when we used <code>geom_histogram()</code> before.</p>
<p>Let’s add the argument <code>method = "lm"</code>, where “lm” stands for <strong>l</strong>inear <strong>m</strong>odel. This causes the fitted line to be straight rather than curved. Let’s also add the argument <code>formula = y ~ x</code>. This makes both messages go away. Again, R was not giving us an error before. It was simply telling us what options it was using since we did not specify the options ourselves.</p>
<!-- HL: should we explain why we make the argument formula = y~x? -->
<p><em>Always include enough detail in your code to make those messages disappear.</em></p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">trains</span>, 
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">att_start</span>, 
           y <span class="op">=</span> <span class="va">att_end</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Immigration Attitudes Among Boston Commuters"</span>,
       subtitle <span class="op">=</span> <span class="st">"Attitudes did not change much after the experiment"</span>,
       x <span class="op">=</span> <span class="st">"Attitude Before Experiment"</span>,
       y <span class="op">=</span> <span class="st">"Attitude After Experiment"</span>,
       caption <span class="op">=</span> <span class="st">"Data source: Enos (2014)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_smooth</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, 
              formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-62-1.png" width="100%"></div>
<p>Notice the gray section surrounding the line we plotted. This area is called the confidence interval, which is set to 95% by default. We will learn about confidence intervals in Chapter <a href="probability.html#probability">5</a>. You can make the shaded are disappear by adding <code>se = FALSE</code> as another argument to <code>geom_smooth()</code>.</p>
</div>
<div id="geom_density" class="section level3" number="1.2.7">
<h3>
<span class="header-section-number">1.2.7</span> <code>geom_density()</code><a class="anchor" aria-label="anchor" href="#geom_density"><i class="fas fa-link"></i></a>
</h3>
<p>Recall our plot from the <code>geom_histogram()</code> section.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">trains</span>, 
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">income</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_histogram</span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Income Among Boston Commuter"</span>,
       subtitle <span class="op">=</span> <span class="st">"Why are there so few people with `middle' incomes?"</span>,
       x <span class="op">=</span> <span class="st">"Income"</span>,
       y <span class="op">=</span> <span class="st">"Count"</span>,
       caption <span class="op">=</span> <span class="st">"Data source: Enos (2014)"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-63-1.png" width="100%"></div>
<p>Change <code>geom_histogram()</code> to <code>geom_density()</code> to make a density plot, which is a smoothed version of the histogram.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">trains</span>, 
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">income</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_density</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Income Among Boston Commuter"</span>,
       subtitle <span class="op">=</span> <span class="st">"Why are there so few people with `middle' incomes?"</span>,
       x <span class="op">=</span> <span class="st">"Income"</span>,
       y <span class="op">=</span> <span class="cn">NULL</span>,
       caption <span class="op">=</span> <span class="st">"Data source: Enos (2014)"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-64-1.png" width="100%"></div>
<p>The values on the y-axis are scaled so that the total area under the curve equals one.</p>
<!-- DK: Other stuff to finish this section with? -->
<!-- HL: could we just list other uncommonly used geom functions that people have the option of using if they want to and point them to another resource that they can learn from if they want? -->
</div>
</div>
<div id="the-tidyverse" class="section level2" number="1.3">
<h2>
<span class="header-section-number">1.3</span> The Tidyverse<a class="anchor" aria-label="anchor" href="#the-tidyverse"><i class="fas fa-link"></i></a>
</h2>
<p>Going forward, most <code>ggplot()</code> code will omit the <code>data =</code> and <code>mapping =</code> explicit naming of arguments while relying on the default ordering. Most of the time, we include argument names and, as a rule, you should to. But we create so many plots in <em>The Primer</em> that these omissions are unlikely to cause problems.</p>
<div id="data-wrangling" class="section level3" number="1.3.1">
<h3>
<span class="header-section-number">1.3.1</span> Data wrangling<a class="anchor" aria-label="anchor" href="#data-wrangling"><i class="fas fa-link"></i></a>
</h3>
<p>We can’t use all the beautiful plots that we learned in the previous chapter until we have “wrangled” the data into a convenient shape. Key wrangling functions include:</p>
<ul>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>: to pick out the <em>rows</em> we want to keep from a tibble.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>: to pick out the <em>columns</em> we want to keep from a tibble.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>: to sort the rows in a tibble, in either ascending or descending order.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>: to create new columns.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>: to assign each row in a tibble to a “group.” This allows statistics to be calculated for each group <em>separately</em>. You will usually use <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> with <code>summarize()</code>.</p></li>
<li><p><code>summarize()</code>: to create a new tibble comprised of summary statistics for one (or more) rows for each grouped variable, or for the tibble as a whole if it is ungrouped.</p></li>
</ul>
</div>
<div id="the-pipe-operator" class="section level3" number="1.3.2">
<h3>
<span class="header-section-number">1.3.2</span> The pipe operator: <code>%&gt;%</code><a class="anchor" aria-label="anchor" href="#the-pipe-operator"><i class="fas fa-link"></i></a>
</h3>
<p>The pipe operator (<code><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></code>) allows us to combine multiple operations in R into a single sequential <em>chain</em> of actions. Much like how the <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> sign has to come at the end of the line when constructing plots — because we are building the plot layer-by-layer — the pipe operator <code><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></code> has to come at the end of the line because we are building a data wrangling pipeline step-by-step. If you do not include the pipe operator, R assumes the next line of code is unrelated to the layers you built and you will get an error.</p>
</div>
<div id="filter-rows" class="section level3" number="1.3.3">
<h3>
<span class="header-section-number">1.3.3</span> <code>filter()</code> rows<a class="anchor" aria-label="anchor" href="#filter-rows"><i class="fas fa-link"></i></a>
</h3>
<div class="figure">
<span id="fig:unnamed-chunk-65"></span>
<img src="01-visualization/images/filter.png" alt="filter() reduces the rows in a tibble." width="100%"><p class="caption">
FIGURE 1.1: filter() reduces the rows in a tibble.
</p>
</div>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> function works much like the “Filter” option in Microsoft Excel. It allows you to specify criteria about the values of a variable in your dataset and then selects only the rows that match that criteria.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"Male"</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 64 x 14
##    treatment att_start att_end gender race  liberal party     age income line   
##    &lt;fct&gt;         &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;lgl&gt;   &lt;chr&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;  
##  1 Treated           3       5 Male   White TRUE    Democr…    63 135000 Framin…
##  2 Treated          11      11 Male   White FALSE   Democr…    45 300000 Framin…
##  3 Control           8       5 Male   White TRUE    Democr…    55 135000 Framin…
##  4 Treated          10      11 Male   White FALSE   Democr…    36 135000 Framin…
##  5 Treated           9      10 Male   White FALSE   Republ…    42 135000 Framin…
##  6 Treated          11       9 Male   White FALSE   Democr…    50 250000 Framin…
##  7 Treated          13      13 Male   White FALSE   Republ…    24 105000 Framin…
##  8 Control           6       7 Male   White TRUE    Democr…    40  62500 Framin…
##  9 Control           8       8 Male   White TRUE    Democr…    53 300000 Framin…
## 10 Treated          13      13 Male   Asian FALSE   Republ…    33 250000 Framin…
## # … with 54 more rows, and 4 more variables: station &lt;chr&gt;, hisp_perc &lt;dbl&gt;,
## #   ideology_start &lt;int&gt;, ideology_end &lt;int&gt;</code></pre>
<p>The result of using <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> will be a tibble with just the rows that you want. When we alter our data, it can be a good idea to save the result in a new data frame by using the <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> assignment operator.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains_men</span> <span class="op">&lt;-</span> <span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"Male"</span><span class="op">)</span></code></pre></div>
<p>Let’s break down the code. We assigned our new data to an object named <code>trains_men</code> via <code>trains_men &lt;-</code>. Because we assigned this modified data frame to <code>trains_men</code>, it is a separate entity from the initial <code>trains</code> data frame. If, however, we had written the code as <code>trains &lt;- trains</code> we would have overwritten the already-existing tibble.</p>
<p>We start with the <code>trains</code> tibble and <em>then</em> <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> so that only those observations where the <code>gender</code> equals “Male” are included. We test for equality using the double equal sign <code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code> and not a single equal sign <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code>. In other words, <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter(gender = "Male")</a></code> will produce an error. This is a convention across many programming languages.</p>
<p>You can use other operators beyond just the <code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code> operator.</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/Comparison.html">&gt;</a></code> for “greater than”</li>
<li>
<code><a href="https://rdrr.io/r/base/Comparison.html">&lt;</a></code> for “less than”</li>
<li>
<code><a href="https://rdrr.io/r/base/Comparison.html">&gt;=</a></code> for “greater than or equal to”</li>
<li>
<code><a href="https://rdrr.io/r/base/Comparison.html">&lt;=</a></code> for “less than or equal to”</li>
<li>
<code><a href="https://rdrr.io/r/base/Comparison.html">!=</a></code> for “not equal to.” The <code><a href="https://rdrr.io/r/base/Logic.html">!</a></code> indicates “not.”</li>
</ul>
<p>Furthermore, you can combine multiple criteria using operators that make comparisons:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> for “or”</li>
<li>
<code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code> for “and”</li>
</ul>
<p>For example, let’s <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> the <code>trains</code> tibble to include only women who are Republicans and younger than 40.</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"Female"</span> <span class="op">&amp;</span> 
           <span class="va">party</span> <span class="op">==</span> <span class="st">"Republican"</span> <span class="op">&amp;</span>
           <span class="va">age</span> <span class="op">&lt;</span> <span class="fl">40</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 14
##   treatment att_start att_end gender race  liberal party      age income line   
##   &lt;fct&gt;         &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;lgl&gt;   &lt;chr&gt;    &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;  
## 1 Treated           9      10 Female White FALSE   Republi…    34 105000 Framin…
## 2 Control          11      10 Female White FALSE   Republi…    21 135000 Frankl…
## 3 Control          15      12 Female White FALSE   Republi…    21 250000 Frankl…
## # … with 4 more variables: station &lt;chr&gt;, hisp_perc &lt;dbl&gt;,
## #   ideology_start &lt;int&gt;, ideology_end &lt;int&gt;</code></pre>
<p>Instead of creating a single criterion with many parts, like with an <code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code>, you can just separate the parts with a comma. The resulting tibble is the same.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"Female"</span>,
         <span class="va">party</span> <span class="op">==</span> <span class="st">"Republican"</span>,
         <span class="va">age</span> <span class="op">&lt;</span> <span class="fl">40</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 14
##   treatment att_start att_end gender race  liberal party      age income line   
##   &lt;fct&gt;         &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;lgl&gt;   &lt;chr&gt;    &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;  
## 1 Treated           9      10 Female White FALSE   Republi…    34 105000 Framin…
## 2 Control          11      10 Female White FALSE   Republi…    21 135000 Frankl…
## 3 Control          15      12 Female White FALSE   Republi…    21 250000 Frankl…
## # … with 4 more variables: station &lt;chr&gt;, hisp_perc &lt;dbl&gt;,
## #   ideology_start &lt;int&gt;, ideology_end &lt;int&gt;</code></pre>
<!-- DK: More examples? -->
</div>
<div id="select-variables" class="section level3" number="1.3.4">
<h3>
<span class="header-section-number">1.3.4</span> <code>select</code> variables<a class="anchor" aria-label="anchor" href="#select-variables"><i class="fas fa-link"></i></a>
</h3>
<div class="figure">
<span id="fig:unnamed-chunk-70"></span>
<img src="01-visualization/images/select.png" alt="select() reduces the number of columns in a tibble." width="100%"><p class="caption">
FIGURE 1.2: select() reduces the number of columns in a tibble.
</p>
</div>
<p>Using the <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> function we were able to pick out specific <em>rows</em> (observations) from the tibble. The <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> function allows us to pick specific <em>columns</em> (variables) instead.</p>
<p>Use <code>glimpse()</code> to see the names of the variables in <code>trains</code>:</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">glimpse</span><span class="op">(</span><span class="va">trains</span><span class="op">)</span></code></pre></div>
<pre><code>## Rows: 115
## Columns: 14
## $ treatment      &lt;fct&gt; Treated, Treated, Treated, Treated, Control, Treated, C…
## $ att_start      &lt;dbl&gt; 11, 9, 3, 11, 8, 13, 13, 10, 12, 9, 10, 11, 13, 6, 8, 1…
## $ att_end        &lt;dbl&gt; 11, 10, 5, 11, 5, 13, 13, 11, 12, 10, 9, 9, 13, 7, 8, 1…
## $ gender         &lt;chr&gt; "Female", "Female", "Male", "Male", "Male", "Female", "…
## $ race           &lt;chr&gt; "White", "White", "White", "White", "White", "White", "…
## $ liberal        &lt;lgl&gt; FALSE, FALSE, TRUE, FALSE, TRUE, FALSE, FALSE, FALSE, F…
## $ party          &lt;chr&gt; "Democrat", "Republican", "Democrat", "Democrat", "Demo…
## $ age            &lt;int&gt; 31, 34, 63, 45, 55, 37, 53, 36, 54, 42, 33, 50, 24, 40,…
## $ income         &lt;dbl&gt; 135000, 105000, 135000, 300000, 135000, 87500, 87500, 1…
## $ line           &lt;chr&gt; "Framingham", "Framingham", "Framingham", "Framingham",…
## $ station        &lt;chr&gt; "Grafton", "Southborough", "Grafton", "Grafton", "Graft…
## $ hisp_perc      &lt;dbl&gt; 0.026, 0.015, 0.019, 0.019, 0.019, 0.023, 0.030, 0.025,…
## $ ideology_start &lt;int&gt; 3, 4, 1, 4, 2, 5, 5, 4, 4, 4, 3, 5, 4, 1, 2, 2, 3, 4, 2…
## $ ideology_end   &lt;int&gt; 3, 4, 2, 4, 2, 5, 5, 4, 3, 4, 3, 4, 4, 1, 2, 3, 3, 1, 2…</code></pre>
<p>However, if you only need two of these variables, say <code>gender</code> and <code>treatment</code>. You can <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> just these two:</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="va">gender</span>, <span class="va">treatment</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 115 x 2
##    gender treatment
##    &lt;chr&gt;  &lt;fct&gt;    
##  1 Female Treated  
##  2 Female Treated  
##  3 Male   Treated  
##  4 Male   Treated  
##  5 Male   Control  
##  6 Female Treated  
##  7 Female Control  
##  8 Male   Treated  
##  9 Female Control  
## 10 Male   Treated  
## # … with 105 more rows</code></pre>
<p>You can drop, or “de-select,” certain variables by using the minus (<code><a href="https://rdrr.io/r/base/Arithmetic.html">-</a></code>) sign:</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">gender</span>, <span class="op">-</span><span class="va">liberal</span>, <span class="op">-</span><span class="va">party</span>, <span class="op">-</span><span class="va">age</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 115 x 10
##    treatment att_start att_end race  income line       station      hisp_perc
##    &lt;fct&gt;         &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;            &lt;dbl&gt;
##  1 Treated          11      11 White 135000 Framingham Grafton         0.0264
##  2 Treated           9      10 White 105000 Framingham Southborough    0.0154
##  3 Treated           3       5 White 135000 Framingham Grafton         0.0191
##  4 Treated          11      11 White 300000 Framingham Grafton         0.0191
##  5 Control           8       5 White 135000 Framingham Grafton         0.0191
##  6 Treated          13      13 White  87500 Framingham Grafton         0.0231
##  7 Control          13      13 White  87500 Framingham Grafton         0.0304
##  8 Treated          10      11 White 135000 Framingham Grafton         0.0247
##  9 Control          12      12 White 105000 Framingham Grafton         0.0247
## 10 Treated           9      10 White 135000 Framingham Grafton         0.0259
## # … with 105 more rows, and 2 more variables: ideology_start &lt;int&gt;,
## #   ideology_end &lt;int&gt;</code></pre>
<p>You can specify a range of columns by using the <code><a href="https://rdrr.io/r/base/Colon.html">:</a></code> operator.</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="va">gender</span><span class="op">:</span><span class="va">age</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 115 x 5
##    gender race  liberal party        age
##    &lt;chr&gt;  &lt;chr&gt; &lt;lgl&gt;   &lt;chr&gt;      &lt;int&gt;
##  1 Female White FALSE   Democrat      31
##  2 Female White FALSE   Republican    34
##  3 Male   White TRUE    Democrat      63
##  4 Male   White FALSE   Democrat      45
##  5 Male   White TRUE    Democrat      55
##  6 Female White FALSE   Democrat      37
##  7 Female White FALSE   Republican    53
##  8 Male   White FALSE   Democrat      36
##  9 Female White FALSE   Democrat      54
## 10 Male   White FALSE   Republican    42
## # … with 105 more rows</code></pre>
<p>This will <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> all columns between the two specified variables.
The <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> function can also be used to rearrange columns when used with the <code>everything()</code> helper function. We can put the <code>treatment</code> and <code>gender</code> variables first with:</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="va">treatment</span>, <span class="va">gender</span>, <span class="fu">everything</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 115 x 14
##    treatment gender att_start att_end race  liberal party     age income line   
##    &lt;fct&gt;     &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;lgl&gt;   &lt;chr&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;  
##  1 Treated   Female        11      11 White FALSE   Democr…    31 135000 Framin…
##  2 Treated   Female         9      10 White FALSE   Republ…    34 105000 Framin…
##  3 Treated   Male           3       5 White TRUE    Democr…    63 135000 Framin…
##  4 Treated   Male          11      11 White FALSE   Democr…    45 300000 Framin…
##  5 Control   Male           8       5 White TRUE    Democr…    55 135000 Framin…
##  6 Treated   Female        13      13 White FALSE   Democr…    37  87500 Framin…
##  7 Control   Female        13      13 White FALSE   Republ…    53  87500 Framin…
##  8 Treated   Male          10      11 White FALSE   Democr…    36 135000 Framin…
##  9 Control   Female        12      12 White FALSE   Democr…    54 105000 Framin…
## 10 Treated   Male           9      10 White FALSE   Republ…    42 135000 Framin…
## # … with 105 more rows, and 4 more variables: station &lt;chr&gt;, hisp_perc &lt;dbl&gt;,
## #   ideology_start &lt;int&gt;, ideology_end &lt;int&gt;</code></pre>
<p>The helper functions <code>starts_with()</code>, <code>ends_with()</code>, and <code>contains()</code> can be used to select variables/columns that match those conditions. Examples:</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="fu">starts_with</span><span class="op">(</span><span class="st">"a"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 115 x 3
##    att_start att_end   age
##        &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
##  1        11      11    31
##  2         9      10    34
##  3         3       5    63
##  4        11      11    45
##  5         8       5    55
##  6        13      13    37
##  7        13      13    53
##  8        10      11    36
##  9        12      12    54
## 10         9      10    42
## # … with 105 more rows</code></pre>
</div>
<div id="slice-and-pull-and" class="section level3" number="1.3.5">
<h3>
<span class="header-section-number">1.3.5</span> <code>slice()</code> and <code>pull()</code> and <code>[]</code><a class="anchor" aria-label="anchor" href="#slice-and-pull-and"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code> and <code>pull()</code> are additional functions that you can use to pick out specific rows or columns within a data frame.</p>
<p>Using <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code> gives us specific rows from the <code>trains</code> tibble:</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">slice</span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 14
##   treatment att_start att_end gender race  liberal party      age income line   
##   &lt;fct&gt;         &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;lgl&gt;   &lt;chr&gt;    &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;  
## 1 Treated           9      10 Female White FALSE   Republi…    34 105000 Framin…
## 2 Treated           3       5 Male   White TRUE    Democrat    63 135000 Framin…
## 3 Treated          11      11 Male   White FALSE   Democrat    45 300000 Framin…
## 4 Control           8       5 Male   White TRUE    Democrat    55 135000 Framin…
## # … with 4 more variables: station &lt;chr&gt;, hisp_perc &lt;dbl&gt;,
## #   ideology_start &lt;int&gt;, ideology_end &lt;int&gt;</code></pre>
<p>Unlike <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice()</a></code> relies on numeric order of the data.</p>
<p><code>pull()</code> grabs out a variable as a vector, rather than leaving it within a tibble, as <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> does:</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">slice</span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">pull</span><span class="op">(</span><span class="va">age</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 34 63 45 55</code></pre>
</div>
<div id="arrange" class="section level3" number="1.3.6">
<h3>
<span class="header-section-number">1.3.6</span> <code>arrange()</code><a class="anchor" aria-label="anchor" href="#arrange"><i class="fas fa-link"></i></a>
</h3>
<!-- DK: Where is the graphic? -->
<p><code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> allows us to sort/reorder a tibble’s rows according to the values of a specific variable. Unlike <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> or <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> does not remove any rows or columns from the tibble. Example:</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="va">treatment</span>, <span class="va">gender</span>, <span class="va">age</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">arrange</span><span class="op">(</span><span class="va">age</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 115 x 3
##    treatment gender   age
##    &lt;fct&gt;     &lt;chr&gt;  &lt;int&gt;
##  1 Treated   Female    20
##  2 Control   Male      20
##  3 Control   Male      21
##  4 Control   Female    21
##  5 Control   Female    21
##  6 Control   Male      22
##  7 Control   Female    22
##  8 Treated   Male      22
##  9 Treated   Male      23
## 10 Control   Male      23
## # … with 105 more rows</code></pre>
<p><code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> always returns rows sorted in ascending order by default. To switch the ordering to descending order instead, use the <code>desc()</code> function:</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="va">treatment</span>, <span class="va">gender</span>, <span class="va">age</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 115 x 3
##    treatment gender   age
##    &lt;fct&gt;     &lt;chr&gt;  &lt;int&gt;
##  1 Control   Female    68
##  2 Control   Male      68
##  3 Control   Male      67
##  4 Treated   Male      63
##  5 Control   Male      63
##  6 Control   Male      61
##  7 Control   Female    60
##  8 Treated   Male      60
##  9 Control   Male      60
## 10 Control   Female    60
## # … with 105 more rows</code></pre>
<p>This is the first of many “pipes” which we will create in <em>The Primer</em>. First, we have the <code>trains</code> tibble. Second, we pipe that to the <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> function. Third, we pipe the results of <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> to the <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> function. <em>Each step in the pipe starts with a tibble and then, once it is done, produces a tibble. It is tibbles all the way down!</em></p>
<!-- DK: Need a graphic of turtle tibbles stacked on each other. -->
</div>
<div id="mutate" class="section level3" number="1.3.7">
<h3>
<span class="header-section-number">1.3.7</span> <code>mutate()</code><a class="anchor" aria-label="anchor" href="#mutate"><i class="fas fa-link"></i></a>
</h3>
<div class="figure">
<span id="fig:unnamed-chunk-81"></span>
<img src="01-visualization/images/mutate.png" alt="`mutate() adds a column to a tibble." width="100%"><p class="caption">
FIGURE 1.3: `mutate() adds a column to a tibble.
</p>
</div>
<p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> takes existing columns and creates a new column. Recall that the <code>income</code> variable in the <code>trains</code> tibble is in dollars. Let’s use <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> to create a new variable which is income in thousands of dollars. (We use <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> at the start of the pipe so that it is easier to see the new and old variables at the same time.)</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="va">gender</span>, <span class="va">income</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>income_in_thousands <span class="op">=</span> <span class="va">income</span> <span class="op">/</span> <span class="fl">1000</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 115 x 3
##    gender income income_in_thousands
##    &lt;chr&gt;   &lt;dbl&gt;               &lt;dbl&gt;
##  1 Female 135000               135  
##  2 Female 105000               105  
##  3 Male   135000               135  
##  4 Male   300000               300  
##  5 Male   135000               135  
##  6 Female  87500                87.5
##  7 Female  87500                87.5
##  8 Male   135000               135  
##  9 Female 105000               105  
## 10 Male   135000               135  
## # … with 105 more rows</code></pre>
<p>Notice that we have a newly created column at the right-hand side of our tibble named <code>income_in_thousands</code>.</p>
<p>When creating new variables we can also <em>overwrite</em> the original tibble:</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">&lt;-</span> <span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>income_in_thousands <span class="op">=</span> <span class="op">(</span><span class="va">income</span><span class="op">)</span> <span class="op">/</span> <span class="fl">1000</span><span class="op">)</span></code></pre></div>
<!-- DK: Awk -->
<p>Whenever we create a new tibble, or a new variable within a tibble, we face a dilemma: Should we overwrite the existing tibble/variable or create a new one? There is no right answer.</p>
<p>For example, instead of overwriting <code>trains</code> in the code above, we could have created a new tibble <code>trains_new</code>. Similarly, instead of creating a new variable, <code>income_in_thousands</code>, we could have overwritten the current value of <code>income</code>. Use your best judgment and be careful.</p>
<div id="if_else" class="section level4" number="1.3.7.1">
<h4>
<span class="header-section-number">1.3.7.1</span> <code>if_else()</code><a class="anchor" aria-label="anchor" href="#if_else"><i class="fas fa-link"></i></a>
</h4>
<!-- DK: Edit these lines from R4DS. Are there other functions which we should mention here? Do something sensible with group_by. To get `_` to work in caption title. Found at https://github.com/rstudio/bookdown/issues/209  -->
<p><code>if_else()</code> is often used within calls to <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>. It has three arguments. The first argument <code>test</code> should be a logical vector. The result will contain the value of the second argument, <code>yes</code>, when test is TRUE, and the value of the third argument, <code>no</code>, when it is FALSE.</p>
<p>Imagine that we want to create a new variable <code>old</code>, which is TRUE when <code>age &gt; 50</code> and FALSE otherwise.</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">select</span><span class="op">(</span><span class="va">age</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>old <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&gt;</span> <span class="fl">50</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 115 x 2
##      age old  
##    &lt;int&gt; &lt;lgl&gt;
##  1    31 FALSE
##  2    34 FALSE
##  3    63 TRUE 
##  4    45 FALSE
##  5    55 TRUE 
##  6    37 FALSE
##  7    53 TRUE 
##  8    36 FALSE
##  9    54 TRUE 
## 10    42 FALSE
## # … with 105 more rows</code></pre>
<p>Another function similar to <code>if_else()</code>, is <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">dplyr::case_when()</a></code>. <code>case_when()</code> is particularly useful inside mutate when you want to create a new variable that relies on a complex combination of existing variables. Note that there is a different version of <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> in <strong>dplyr</strong>: <code>if_else()</code>. This works exactly the same as the standard version but is somewhat more robust.</p>
<!-- HL: what does somewhat more robust mean, also why do we teach ifelse() first if if_else() is the "robust" version and presumably if it's stronger it's the one people should use? -->
<!-- DK: More details? -->
</div>
</div>
<div id="summarize" class="section level3" number="1.3.8">
<h3>
<span class="header-section-number">1.3.8</span> <code>summarize()</code><a class="anchor" aria-label="anchor" href="#summarize"><i class="fas fa-link"></i></a>
</h3>
<p>A musical interlude inspired by the Tidyverse:</p>
<iframe src="https://www.youtube.com/embed/p8Py9C8iq2s?showcase=0" width="100%" height="400px">
</iframe>
<p>We often need to calculate <em>summary statistics</em>, things like the <em>mean</em> (also called the average) and the <em>median</em> (the middle value). Other examples of summary statistics include the <em>sum</em>, the <em>minimum</em>, the <em>maximum</em>, and the <em>standard deviation</em>.</p>
<p>The function <code>summarize()</code> allows us to calculate these statistics on individual columns from a tibble. Example:</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarize</span><span class="op">(</span>mn_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>, 
            sd_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   mn_age sd_age
##    &lt;dbl&gt;  &lt;dbl&gt;
## 1   42.4   12.2</code></pre>
<p>The <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> and <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code> summary functions go inside the <code>summarize()</code> function. The <code>summarize()</code> function takes in a tibble and returns a tibbles with only one row corresponding to the summary statistics. Remember: Tibbles go in and tibble come out.</p>
<!-- HL: can we specify why we're assigned mean(age) to mn_age? just to clarify that it gives them proper column headings -->
</div>
<div id="statistics-for-distributions" class="section level3" number="1.3.9">
<h3>
<span class="header-section-number">1.3.9</span> Statistics for distributions<a class="anchor" aria-label="anchor" href="#statistics-for-distributions"><i class="fas fa-link"></i></a>
</h3>
<!-- HL: should we include this at the beginning? up with terminology and such. We use means and summarize before we actually introduce what they mean, so it feels a little out of place to be introducing them after we've used them already -->
<p>A variable in a tibble is a column, a vector of values. We sometimes refer to this vector as a “distribution.” This is somewhat sloppy in that a distribution can be many things, most commonly a mathematical formula. But, strictly speaking, a “frequency distribution” or an “empirical distribution” is a list of values, so this usage is not unreasonable.</p>
<p><em>There are two distinct concepts: a distribution and a set values drawn from that distribution.</em> But, in everyday use, we use “distribution” to both. When given a distribution (meaning a vector of numbers), we often use <code>geom_histogram()</code> or <code>geom_density()</code> to graph it. But, sometimes, we don’t want to look at the whole thing. We just want some summary measures which report the key aspects of the distribution. The two most important attributes of a distribution are its <em>center</em> and its <em>variation</em> around that center.</p>
<p>We use <code>summarize()</code> to calculate statistics for a variable, a column, a vector of values or a distribution. Note the language sloppiness. For the purposes of this book, “variable,” “column,” “vector,” and “distribution” all mean the same thing. Popular statistical functions include: <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>, <code><a href="https://rdrr.io/r/stats/median.html">median()</a></code>, <code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code>, <code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code>, <code>n()</code> and <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>. Functions which may be new to you include three measures of the “spread” of a distribution: <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code> (the standard deviation), <code><a href="https://rdrr.io/r/stats/mad.html">mad()</a></code> (the scaled median absolute deviation) and <code><a href="https://rdrr.io/r/stats/quantile.html">quantile()</a></code>, which is used to calculate an <em>interval</em> which includes a specified proportion of the values.</p>
<p><strong><code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code></strong></p>
<p>The mean, or average, is the most commonly reported measure of the center of a distribution. The mean is the sum of all of the data elements divided by the number of elements. If we have <span class="math inline">\(N\)</span> data points, the mean is given by:</p>
<p><span class="math display">\[\bar{x} = \frac{x_1 + x_2 + \cdots + x_N}{N}\]</span></p>
<p><strong><code><a href="https://rdrr.io/r/stats/median.html">median()</a></code></strong></p>
<!-- DK: Use math formula, like this one: https://math.stackexchange.com/questions/1097546/what-is-the-general-formula-for-calculating-the-median -->
<p>The median is another commonly reported measure of the center of a distribution, calculated by first sorting the vector of values from smallest to largest. The middle element in the sorted list is the <em>median</em>. If the middle falls between two values, then the median is the mean of those two middle values. The median and the mean are the two most common measures of the <em>center</em> of a distribution. The median is more stable, less affected by outliers. There is no widely accepted symbol for the median, although <span class="math inline">\(\tilde{x}\)</span> is not uncommon.</p>
<p><strong><code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code></strong></p>
<p>The standard deviation (<em>sd</em>) of a distribution is a measure of its variation around the mean.</p>
<p><span class="math display">\[\text{sd} = \sqrt{\frac{(x_1 - \bar{x})^2 + (x_2 - \bar{x})^2 + \cdots + (x_n - \bar{x})^2}{n - 1}}\]</span></p>
<!-- DK: More detail. How much does it cover? Plot a not-too-weirdish distribution and show two sd's on it. -->
<p><strong><code><a href="https://rdrr.io/r/stats/mad.html">mad()</a></code></strong></p>
<p>The scaled median absolute deviation (<em>mad</em>) is a measure of variation around the median. It is not as popular as the standard deviation. The formula for calculating <em>mad</em> is a bit mysterious.</p>
<p><span class="math display">\[\text{mad} = 1.4826 \times \text{median}(abs(x - \tilde{x}))\]</span></p>
<p>The basic idea for both <em>sd</em> and <em>mad</em> is that we need a measure of variation around the center of the distribution. <em>sd</em> uses the mean, <span class="math inline">\(\bar{x}\)</span>, as its estimate of the center while <em>mad</em> uses the median, <span class="math inline">\(\tilde{x}\)</span>. Because <em>mad</em> uses the absolute difference, as opposed to the squared difference, it is more robust to outliers. The 1.4826 multiplier causes the <em>mad</em> and the <em>sd</em> to be identical in the (important) case of standard normal distributions, a topic we will cover in Chapter <a href="wrangling.html#wrangling">2</a>.</p>
<!-- DK: Could have more conversation. -->
<!-- DK: These formulas are inconsistent, with one using vectors. Should make these consistent, perhaps even give formula for median. -->
<p><strong><code><a href="https://rdrr.io/r/stats/quantile.html">quantile()</a></code></strong></p>
<p>The <em>quantile</em> of a distribution is the value of that distribution which occupies a specific percentile location in the sorted list of values.</p>
<p>The 5th percentile distribution is the point below which 5% of the data falls. The 95th percentile is, similarly, the point below which 95% of the data falls. The 50th percentile, the median, splits the data into two separate, and equal, parts. The minimum is at the 0th percentile. The maximum is at the 100th percentile.</p>
<!-- HL: it's kinda unclear what the relationship between this paragraph and quantiles is? Also I sort of think the definition of quantile is rather wordy and not super clear -->
<p>Let’s take a look at the <code>poverty</code> variable in the <code>kenya</code> tibble from the <strong>primer.data</strong> package. <code>poverty</code> is the percentage of residents in each community with incomes below the poverty line. Let’s first confirm that <code><a href="https://rdrr.io/r/stats/quantile.html">quantile()</a></code> works by comparing its output with that from simpler functions.</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">kenya</span><span class="op">$</span><span class="va">poverty</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">kenya</span><span class="op">$</span><span class="va">poverty</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">kenya</span><span class="op">$</span><span class="va">poverty</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 0.18 0.43 0.90</code></pre>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">kenya</span><span class="op">$</span><span class="va">poverty</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##   0%  50% 100% 
## 0.18 0.43 0.90</code></pre>
<p>The <code>probs</code> argument allows us to specify the percentile(s) we want. Two of the most important percentiles are the 2.5th and 97.5th because they define the <em>95% interval</em>, a central range which includes 95% of the values.</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">kenya</span><span class="op">$</span><span class="va">poverty</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.025</span>, <span class="fl">0.975</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##  2.5% 97.5% 
##  0.22  0.66</code></pre>
<p>The interval between these two percentiles includes 95% of all the values in the distribution. Depending on the context, this interval is sometimes called a “confidence interval” or “uncertainty interval” or “compatibility interval.” Different percentile ranges create intervals of different widths.</p>
<p>An interesting fact is that, most of the time, the 95% confidence interval is, roughly, the same as the center of the distribution <span class="math inline">\(\pm\)</span> two times the standard deviation.</p>
<p>In distributions without major outliers, the mean/median and sd/mad will be very similar to each other.</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kenya</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarise</span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">poverty</span><span class="op">)</span>,
            median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">poverty</span><span class="op">)</span>,
            sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">poverty</span><span class="op">)</span>,
            mad <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/mad.html">mad</a></span><span class="op">(</span><span class="va">poverty</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##    mean median    sd    mad
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 0.426  0.432 0.109 0.0977</code></pre>
<p>It follows that intervals defined with them will be similar.</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">kenya</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarise</span><span class="op">(</span>interval_1_bottom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">poverty</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">poverty</span><span class="op">)</span>,
            interval_1_top <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">poverty</span><span class="op">)</span> <span class="op">+</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">poverty</span><span class="op">)</span>,
            interval_2_bottom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">poverty</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/mad.html">mad</a></span><span class="op">(</span><span class="va">poverty</span><span class="op">)</span>,
            interval_2_top <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">poverty</span><span class="op">)</span> <span class="op">+</span> <span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/mad.html">mad</a></span><span class="op">(</span><span class="va">poverty</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##   interval_1_bottom interval_1_top interval_2_bottom interval_2_top
##               &lt;dbl&gt;          &lt;dbl&gt;             &lt;dbl&gt;          &lt;dbl&gt;
## 1             0.208          0.645             0.236          0.627</code></pre>
<p>These intervals are similar to each other and similar to the 95% interval calculated above. The match is only roughly true, but it is good enough for most applied work.</p>
<p>If there is an <code>NA</code> value in the variable, any statistical function like <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> will return <code>NA</code>. You can fix this by using <code>na.rm = TRUE</code> with the statistical function.</p>
<!-- HL: can we give an example of using na.rm = TRUE? -->
<!-- DK: Might make a nice looking plot. -->
</div>
<div id="group_by" class="section level3" number="1.3.10">
<h3>
<span class="header-section-number">1.3.10</span> <code>group_by()</code><a class="anchor" aria-label="anchor" href="#group_by"><i class="fas fa-link"></i></a>
</h3>
<p>We can the use <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> with <code>summarize()</code> to calculate the average age for all the people in <code>trains</code>, as we did above.</p>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarize</span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##    mean
##   &lt;dbl&gt;
## 1  42.4</code></pre>
<p>What if we want the mean <code>age</code> for each <code>gender</code>? Consider:</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">gender</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 115 x 15
## # Groups:   gender [2]
##    treatment att_start att_end gender race  liberal party     age income line   
##    &lt;fct&gt;         &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;lgl&gt;   &lt;chr&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;  
##  1 Treated          11      11 Female White FALSE   Democr…    31 135000 Framin…
##  2 Treated           9      10 Female White FALSE   Republ…    34 105000 Framin…
##  3 Treated           3       5 Male   White TRUE    Democr…    63 135000 Framin…
##  4 Treated          11      11 Male   White FALSE   Democr…    45 300000 Framin…
##  5 Control           8       5 Male   White TRUE    Democr…    55 135000 Framin…
##  6 Treated          13      13 Female White FALSE   Democr…    37  87500 Framin…
##  7 Control          13      13 Female White FALSE   Republ…    53  87500 Framin…
##  8 Treated          10      11 Male   White FALSE   Democr…    36 135000 Framin…
##  9 Control          12      12 Female White FALSE   Democr…    54 105000 Framin…
## 10 Treated           9      10 Male   White FALSE   Republ…    42 135000 Framin…
## # … with 105 more rows, and 5 more variables: station &lt;chr&gt;, hisp_perc &lt;dbl&gt;,
## #   ideology_start &lt;int&gt;, ideology_end &lt;int&gt;, income_in_thousands &lt;dbl&gt;</code></pre>
<p>The data is the same as before, but note the “Groups” message at the top. R is informing you that this tibble has been grouped so that any operation you perform now will be done for each <code>gender</code>.</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarize</span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   gender  mean
##   &lt;chr&gt;  &lt;dbl&gt;
## 1 Female  41.0
## 2 Male    43.5</code></pre>
<p>Notice the message R sends us. The warning means that the tibble which issues forth from the end of the pipe has been “ungrouped.” This means the group attribute we applied with <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> has been removed. This behavior is the (sensible) default.</p>
<p>The proper way to handle the situation, here and everywhere else that we use <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> and <code>summarize()</code>, is to specify the <code>.groups</code> argument.</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trains</span> <span class="op">%&gt;%</span> 
  <span class="fu">group_by</span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">summarize</span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>,
            .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   gender  mean
##   &lt;chr&gt;  &lt;dbl&gt;
## 1 Female  41.0
## 2 Male    43.5</code></pre>
<p>This code does the same thing as the first version, but does not issue a message, since we have made an affirmative decision to drop any grouping variables.</p>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> function doesn’t change data frames by itself. Rather it changes the <em>meta-data</em>, or data about the data, specifically the grouping structure. It is only after we apply the <code>summarize()</code> function that the tibble changes.</p>
<p>If you have a tibble which has been grouped, you can remove the grouping variable by using <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup()</a></code>.</p>
<p><em>When your R code is behaving in a weird way, especially when it is “losing” rows, the problem is often solved by using <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup()</a></code> in the pipeline.</em></p>
</div>
</div>
<div id="advanced-plots" class="section level2" number="1.4">
<h2>
<span class="header-section-number">1.4</span> Advanced Plots<a class="anchor" aria-label="anchor" href="#advanced-plots"><i class="fas fa-link"></i></a>
</h2>
<!-- DK: Other stuff needed here? after_stat; plotting two geoms at once; scale_x for changing labels; scales:: for axis formatting. coord_cartesian() and xlim/ylim, which allows for zooming/rescaling graphs. Other? -->
<!-- - using scales to change the name and labels of a legend. -->
<!-- - facet_grid() to facet by more than 1 variable. -->
<!-- 1) Plots are ordered alphabetically if it is a character and by levels if it is a factor. Dates appear differently in plots. reorder() is useful. Cover this at start of advanced plotting. -->
<!-- 2) Purpose of Advanced plotting is to show the tools for making the plots that appear in socviz.co, chapters 3 and 4.  -->
<!-- BG: teach scalexcont, scaleycont, afterstat, late tricks in the book, do not worry about building gapminder -->
<p>Good visualizations teach. When you construct a plot, decide what message you want to convey. Here are some functions which may be helpful.</p>
<div id="plot-objects" class="section level3" number="1.4.1">
<h3>
<span class="header-section-number">1.4.1</span> Plot objects<a class="anchor" aria-label="anchor" href="#plot-objects"><i class="fas fa-link"></i></a>
</h3>
<p>Plots are R objects, just like tibbles. We can create them, print them and save them. Up until now, we have just “spat” them out in an R code chunk. Nothing wrong with that! Indeed, this is the most common approach to plotting in R. Sometimes, however, it is handy to work with a plot object. Consider:</p>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">train_plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">trains</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, 
                     y <span class="op">=</span> <span class="va">income</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>This is the same code as our first example with <code>geom_point()</code>. <code>train_plot</code> is an R object. This code does not print anything out. In order to make this plot appear, we need to print it out explicitly:</p>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">train_plot</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-96-1.png" width="100%"></div>
<p>Recall that typing the name of an object is the same thing as using <code><a href="https://rdrr.io/r/base/print.html">print()</a></code>. Now that we have this object, we can display it whenever we want.</p>
<p>But, sometimes, we want a permanent copy of the plot, saved to our computer. That is the purpose of <code>ggsave()</code>:</p>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggsave</span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"enos_trains.jpg"</span>, 
       plot <span class="op">=</span> <span class="va">train_plot</span><span class="op">)</span></code></pre></div>
<p><code>ggsave()</code> uses the suffix of the provided <code>filename</code> to determine the type of image to save. Because we use “enos_trains.jpg,” the file is saved in JPEG format. If we had used “enos_trains.png,” the file would have been saved as a PNG. We can display a saved file by using <code><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">knitr::include_graphics()</a></code>. For example:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb109-1"><a href="visualization.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb109-2"><a href="visualization.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::include_graphics("enos_trains.jpg")</span></span>
<span id="cb109-3"><a href="visualization.html#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>This code displays the image in an Rmd, assuming that the file “enos_trains.jpg” is located in the current working directory. A common scenario is that we create an image and store it in a directory named <code>figures/</code> and then use that figure in more than one Rmd.</p>
</div>
<div id="faceting" class="section level3" number="1.4.2">
<h3>
<span class="header-section-number">1.4.2</span> Faceting<a class="anchor" aria-label="anchor" href="#faceting"><i class="fas fa-link"></i></a>
</h3>
<p>Faceting splits a visualization into parts, one for each value of another variable.. This will create multiple copies of the same type of plot with matching x and y axes, but whose contents will differ.</p>
<p>Before we proceed, let’s create a subset of the tibble <code>gapminder</code>, from the <strong>gapminder</strong>, package to use. (You may need to install the <strong>gapminder</strong> package for this code to work.)</p>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder">gapminder</a></span><span class="op">)</span>
<span class="va">gapminder_filt</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span> 
      <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2007</span>, <span class="va">continent</span> <span class="op">!=</span> <span class="st">"Oceania"</span><span class="op">)</span></code></pre></div>
<p>Let’s plot our filtered data using <code>geom_point()</code></p>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder_filt</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, 
                     y <span class="op">=</span> <span class="va">lifeExp</span>, 
                     color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-99-1.png" width="100%"></div>
<p>It is difficult to compare the continents despite the colors. It would be much easier if we could “split” this scatterplot by the 4 continents. In other words, we would create plots of <code>gdpPercap</code> and <code>lifeExp</code> for each <code>continent</code> separately. We do this by using the function <code>facet_wrap()</code> with the argument <code>~ continent</code>.</p>
<!-- HL: I feel like we should highlight the fact you need a squiggly thing (what is that called) in front of the name bc I forgot it several times while I was trying to use facet_wrap -->
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder_filt</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, 
                     y <span class="op">=</span> <span class="va">lifeExp</span>, 
                     color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">continent</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-100-1.png" width="100%"></div>
<p>This is much better! We can specify the number of rows and columns in the grid by using the <code>nrow</code> argument inside of <code>facet_wrap()</code>. Let’s get all continents in a row by setting <code>nrow</code> to 1. Let’s also add a trend line <code>geom_smooth()</code> to our faceted plot.</p>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder_filt</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, 
                     y <span class="op">=</span> <span class="va">lifeExp</span>, 
                     color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">continent</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_smooth</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, 
              formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, 
              se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-101-1.png" width="100%"></div>
<p>As expected, we can see a positive correlation between economic development and life expectancy on all continents.</p>
</div>
<div id="stats" class="section level3" number="1.4.3">
<h3>
<span class="header-section-number">1.4.3</span> Stats<a class="anchor" aria-label="anchor" href="#stats"><i class="fas fa-link"></i></a>
</h3>
<p>Consider the following histogram.</p>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span><span class="op">+</span> 
  <span class="fu">geom_histogram</span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">20</span>, 
                 color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-102-1.png" width="100%"></div>
<p>Recall that the y-aesthetic of a histogram — the count of the observations in each bin — gets computed automatically. We can use the <code>after_stat()</code> argument within <code>geom_histogram()</code> to generate percent values as our y-aesthetic.</p>
<!-- HL: should probably explain what after_stat does -->
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">lifeExp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_histogram</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="fu">after_stat</span><span class="op">(</span><span class="va">count</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, 
                   bins <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Percentage"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-103-1.png" width="100%"></div>
</div>
<div id="coordinate-systems" class="section level3" number="1.4.4">
<h3>
<span class="header-section-number">1.4.4</span> Coordinate Systems<a class="anchor" aria-label="anchor" href="#coordinate-systems"><i class="fas fa-link"></i></a>
</h3>
<!-- DK: Awk? Delete? Need more tricks, but more pithily explained and demonstrated. -->
<p>We can switch the axes on a plot with <code>coord_flip()</code>. Consider the faceted scatterplot we previously created.</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder_filt</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, 
                     y <span class="op">=</span> <span class="va">lifeExp</span>, 
                     color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">continent</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_smooth</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, 
              formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, 
              se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-104-1.png" width="100%"></div>
<p>Adding the layer <code>coord_flip()</code> flips the axes.</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">gapminder_filt</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, 
                     y <span class="op">=</span> <span class="va">lifeExp</span>, 
                     color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">continent</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_smooth</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, 
              formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, 
              se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-105-1.png" width="100%"></div>
<p><code>lifeExp</code> is now on the x-axis and <code>gdpPercap</code> on the y-axis. Compared to the previous plot it is now easier to observe the distribution of life expectancy in the respective continents. For example, we can see that many countries in Africa are at about 55 years, in the Americas and Asia at 75 years, and in Europe at 80 years. However, we think it makes more sense to consider <code>lifeExp</code> as the dependent variable, so we won’t use <code>coord_flip()</code> in subsequent plots.</p>
</div>
<div id="axis-limits-and-scales" class="section level3" number="1.4.5">
<h3>
<span class="header-section-number">1.4.5</span> Axis Limits and Scales<a class="anchor" aria-label="anchor" href="#axis-limits-and-scales"><i class="fas fa-link"></i></a>
</h3>
<p>We can also manipulate the limits of the axes by using <code><a href="https://rdrr.io/r/graphics/plot.window.html">xlim()</a></code> and <code><a href="https://rdrr.io/r/graphics/plot.window.html">ylim()</a></code> within a call to <code>coord_cartesian()</code>. For example, assume that we are only interested in countries with a GDP per capita from 0 to 30,000. Recall that, because <code>data</code> is the first argument and <code>mapping</code> is the second to <code>ggplot()</code>, we don’t actually have to name the arguments. We can just provide them, as long as they are in the correct order.</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">gapminder_filt</span>, 
       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">gdpPercap</span>, y <span class="op">=</span> <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">continent</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">coord_cartesian</span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">30000</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-106-1.png" width="100%"></div>
<p>We can see that the GDP per capita on the x-axis is now only shown from 0 to 30,000.</p>
<p>We can also change the scaling of the axes. For example, it might be useful to display the axes on a logarithmic scale by using <code>scale_x_log10()</code> or <code>scale_y_log10()</code>. Also, note that we can (lazily!) not provide the explicit <code>x</code> and <code>y</code> argument names to <code>aes()</code> as long as we provide the values in the right order: <code>x</code> comes before <code>y</code>.</p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">gapminder_filt</span>, 
       <span class="fu">aes</span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">continent</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_smooth</span><span class="op">(</span>formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, method <span class="op">=</span> <span class="st">"lm"</span>, se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-107-1.png" width="100%"></div>
<!-- BG: Need scale_x_cont and scale_y_cont here -->
</div>
<div id="text" class="section level3" number="1.4.6">
<h3>
<span class="header-section-number">1.4.6</span> Text<a class="anchor" aria-label="anchor" href="#text"><i class="fas fa-link"></i></a>
</h3>
<!-- DK: Should learn about ggrepel -->
<p>Recall we use <code>labs()</code> to add labels and titles to our plots.
We can also change labels inside the plots using <code>geom_text()</code>.</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">gapminder_filt</span>, 
       <span class="fu">aes</span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">continent</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_smooth</span><span class="op">(</span>formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, method <span class="op">=</span> <span class="st">"lm"</span>, se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Life Expectancy and GDP per Capita (2007)"</span>,
       subtitle <span class="op">=</span> <span class="st">"Selected Nations by Continent"</span>,
       x <span class="op">=</span> <span class="st">"GDP per Capita, USD"</span>,
       y <span class="op">=</span> <span class="st">"Life Expectancy, Years"</span>,
       caption <span class="op">=</span> <span class="st">"Source: Gapminder"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_text</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">country</span><span class="op">)</span>, 
            size <span class="op">=</span> <span class="fl">2</span>, 
            color <span class="op">=</span> <span class="st">"black"</span>, 
            check_overlap <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-108-1.png" width="100%"></div>
<p>Let’s breakdown the code within <code>geom_text()</code>. We included a new aesthetic called <em>label</em>. This defines the character variable which will be used as the basis for the labels. We set <code>label</code> to country so each point corresponds to the country it represents. We set the text font by setting <code>size</code> to 2, and we set the text color by using <code>color</code>. Finally, we included the argument <code>check_overlap = TRUE</code> to make sure the names of the countries were legible.</p>
</div>
<div id="themes" class="section level3" number="1.4.7">
<h3>
<span class="header-section-number">1.4.7</span> Themes<a class="anchor" aria-label="anchor" href="#themes"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Themes</strong> can be used to change the overall appearance of a plot without much effort. We add themes as layers to our plots. You can find an overview of the different themes in <strong>ggplot</strong> <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">here</a>.</p>
<p>Consider the following faceted scatterplot.</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">continent</span> <span class="op">!=</span> <span class="st">"Oceania"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_smooth</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, 
                formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span>,
                se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">continent</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Life Expectancy and GDP per Capita"</span>,
         subtitle <span class="op">=</span> <span class="st">"Connection between GDP and life expectancy is weakest in Africa"</span>,
         x <span class="op">=</span> <span class="st">"GDP per Capita in USD"</span>,
         y <span class="op">=</span> <span class="st">"Life Expectancy"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_x_log10</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">5000</span>, <span class="fl">50000</span><span class="op">)</span><span class="op">)</span> </code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-109-1.png" width="100%"></div>
<p>Note the use of the <code>breaks</code> argument to <code>scale_x_log10()</code>. This specifies the location of labels on the x-axis. We can also use the <code>labels</code> argument if we want to change their appearence. These tricks work in the entire family of <code>scale_*</code> functions.</p>
<p>Let’s now add a theme to our faceted scatterplot. We will use the theme <code><a href="https://rdrr.io/pkg/ggthemes/man/theme_economist.html">theme_economist()</a></code>, from the <strong>ggthemes</strong> package, to make our plot look like the plots in the <em>The Economist</em>.</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jrnold/ggthemes">ggthemes</a></span><span class="op">)</span>

<span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">continent</span> <span class="op">!=</span> <span class="st">"Oceania"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_smooth</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, 
                formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span>,
                se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">continent</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Life Expectancy and GDP per Capita"</span>,
         subtitle <span class="op">=</span> <span class="st">"Connection between GDP and life expectancy is weakest in Africa"</span>,
         x <span class="op">=</span> <span class="st">"GDP per Capita in USD"</span>,
         y <span class="op">=</span> <span class="st">"Life Expectancy"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_x_log10</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">5000</span>, <span class="fl">50000</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_economist.html">theme_economist</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-110-1.png" width="100%"></div>
<p>This looks pretty good. However, notice the legend the top of our graph. It crowds our graph and takes away from the most important part: the data. We can use <code>theme()</code> to customize the non-data parts of our plots such as background, gridlines, and legends. Let’s de-clutter the graph by removing our legend. We can do this by using the <code>legend.position</code> argument and setting it to “none.”</p>
<!-- DK: Make this new code consistent with the above. -->
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">continent</span> <span class="op">!=</span> <span class="st">"Oceania"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_smooth</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, 
                formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span>,
                se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">continent</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Life Expectancy and GDP per Capita"</span>,
         subtitle <span class="op">=</span> <span class="st">"Connection between GDP and life expectancy is weakest in Africa"</span>,
         x <span class="op">=</span> <span class="st">"GDP per Capita in USD"</span>,
         y <span class="op">=</span> <span class="st">"Life Expectancy"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_x_log10</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">5000</span>, <span class="fl">50000</span><span class="op">)</span>,
                  labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_dollar.html">dollar_format</a></span><span class="op">(</span>accuracy <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="https://rdrr.io/pkg/ggthemes/man/theme_economist.html">theme_economist</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-111-1.png" width="100%"></div>
<p>Great. Now our graph is easier to visualize. In addition, note that the <code>theme()</code> function also offers a wide <a href="https://ggplot2.tidyverse.org/reference/theme.html">selection</a> of functions for manually changing individual elements.</p>
</div>
</div>
<div id="summary-1" class="section level2" number="1.5">
<h2>
<span class="header-section-number">1.5</span> Summary<a class="anchor" aria-label="anchor" href="#summary-1"><i class="fas fa-link"></i></a>
</h2>
<p><em>Tibbles are rectangular stores of data. They are a specific type of data frame, so we will use both terms interchangeably.</em></p>
<p><em>You need to practice every day.</em></p>
<p><em>Do not use pie charts.</em></p>
<p><em>Shield my eyes from your ugly messages and warning.</em></p>
<p><em>Each step in the pipe starts with a tibble and then, once it is done, produces a tibble. It is tibbles all the way down!</em></p>
<p><em>When your R code is behaving in a weird way, especially when it is “losing” rows, the problem is often solved by using <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup()</a></code> in the pipeline.</em></p>
<p><em>The two most important attributes of a distribution are its center and its variation around that center.</em></p>
<p>In this chapter, we first looked at basic coding terminology and concepts that we deal with when programming with R. We then learned about the three basic components that make up each plot: data, mapping, and one or more geoms. The <strong>ggplot2</strong> package offers a wide range of geoms that we can use to create different types of plots. Next, we examined the “super package” <strong>tidyverse</strong>, which includes helpful tools for visualization. It also offers features for importing and manipulating data, which is the main topic of Chapter @(wrangling). Lastly, we explored advanced plotting features such as axis scaling, faceting, and themes.</p>
<p>The main <em>statistical</em> concept we discussed was that of a “distribution,” a collection of related numbers. In R, these numbers are usually stored as a variable inside of a tibble. “Frequency distribution” and “empirical distribution” are common phrases to describe such objects. We learned how to calculate statistics — often referred to as “summary statistics” — about these distributions. The most important involve two concepts: the center of the distribution and the variability of the distribution. The center is most often summarized with the <em>mean</em> (<code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>) or the <em>median</em> (<code><a href="https://rdrr.io/r/stats/median.html">median()</a></code>). Variability is measured with the standard deviation (<code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code>) or the scaled median absolute deviation (<code><a href="https://rdrr.io/r/stats/mad.html">mad()</a></code>) or the 95% confidence interval (<code><a href="https://rdrr.io/r/stats/quantile.html">quantile(probs = c(0.025, 0.975))</a></code>).</p>
<p>Recall the plot we began the chapter with:</p>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-112-1.png" width="100%"></div>
<p>You now know enough to make plots like this by yourself.</p>
<!-- HL: maybe we should just leave a link to other areas of the primer where they can explore the annimate and plotly stuff? feels sort of wrong to just leave it dangling here and then not explain it. Maybe we can include the pretty graphs as a teaser and then redirect them to where they should actually learn about it bc the code feels awkwardly plopped here -->
<p>It is important to know that we have only seen a small part of what R offers. For example, we can use the <strong>gganimate</strong> package to bring a slightly modified version of our gapminder plot to life:</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://gganimate.com">gganimate</a></span><span class="op">)</span>

<span class="va">gap_anim</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">continent</span> <span class="op">!=</span> <span class="st">"Oceania"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">gdpPercap</span>, <span class="va">lifeExp</span>, color <span class="op">=</span> <span class="va">continent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_point</span><span class="op">(</span>show.legend <span class="op">=</span> <span class="cn">FALSE</span>, alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">continent</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_size</span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">labs</span><span class="op">(</span>subtitle <span class="op">=</span> <span class="st">"Life Expectancy and GDP per Capita (1952-2007)"</span>,
         x <span class="op">=</span> <span class="st">"GDP per Capita, USD"</span>,
         y <span class="op">=</span> <span class="st">"Life Expectancy, Years"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme_linedraw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://gganimate.com/reference/transition_time.html">transition_time</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Year: {frame_time}"</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://gganimate.com/reference/shadow_wake.html">shadow_wake</a></span><span class="op">(</span>wake_length <span class="op">=</span> <span class="fl">0.1</span>, alpha <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">gap_anim</span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/unnamed-chunk-113-1.gif" width="100%"></div>
<p>The <strong>plotly</strong> package makes our plot interactive. Click on it and explore!</p>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://plotly-r.com">plotly</a></span><span class="op">)</span>

<span class="fu"><a href="https://docs.ropensci.org/plotly/reference/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="va">gap_p</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-ba452f997c559836b87f" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ba452f997c559836b87f">{"x":{"data":[{"x":[3.79402544509666,3.68099065562682,3.1587498285201,4.09933015629768,3.08530235219712,2.63353984732021,3.31007599301138,2.848814873635,3.23148583131337,2.99394204506796,2.44334414004637,3.56021253312911,3.18885823537455,3.31858116595608,3.74672610693845,4.08472243900371,2.80710831941093,2.83935583435696,4.12078722664154,2.87665060639063,3.1230701584329,2.9743524119827,2.76285235400399,3.16531831968284,3.19571467604724,2.61753222691212,4.08125724466051,3.01902074595738,2.88044194586588,3.0181100381011,3.25603221652431,4.03969130967891,3.58208328429303,2.91576148434958,3.68224081186337,2.79216530171644,3.30405457229069,3.88480230343241,2.93605531183875,3.20369500466057,3.23362351372365,2.93577962517273,2.96667714274902,3.96706370233863,3.41537321502711,3.65451158423759,3.04433674769752,2.94594592049266,3.85082524675123,3.02382022004224,3.10421784482941,2.67182915731664],"y":[72.301,42.731,56.728,50.728,52.295,49.58,50.43,44.741,50.651,65.152,46.462,55.322,48.328,54.791,71.338,51.579,58.04,52.947,56.735,59.448,60.022,56.007,46.388,54.11,42.592,45.678,73.952,59.443,48.303,54.467,64.164,72.801,71.164,42.082,52.906,56.867,46.859,76.442,46.242,65.528,63.062,42.568,48.159,49.339,58.556,39.613,52.517,58.42,73.923,51.542,42.384,43.487],"text":["gdpPercap:  6223<br />lifeExp: 72<br />continent: Africa","gdpPercap:  4797<br />lifeExp: 43<br />continent: Africa","gdpPercap:  1441<br />lifeExp: 57<br />continent: Africa","gdpPercap: 12570<br />lifeExp: 51<br />continent: Africa","gdpPercap:  1217<br />lifeExp: 52<br />continent: Africa","gdpPercap:   430<br />lifeExp: 50<br />continent: Africa","gdpPercap:  2042<br />lifeExp: 50<br />continent: Africa","gdpPercap:   706<br />lifeExp: 45<br />continent: Africa","gdpPercap:  1704<br />lifeExp: 51<br />continent: Africa","gdpPercap:   986<br />lifeExp: 65<br />continent: Africa","gdpPercap:   278<br />lifeExp: 46<br />continent: Africa","gdpPercap:  3633<br />lifeExp: 55<br />continent: Africa","gdpPercap:  1545<br />lifeExp: 48<br />continent: Africa","gdpPercap:  2082<br />lifeExp: 55<br />continent: Africa","gdpPercap:  5581<br />lifeExp: 71<br />continent: Africa","gdpPercap: 12154<br />lifeExp: 52<br />continent: Africa","gdpPercap:   641<br />lifeExp: 58<br />continent: Africa","gdpPercap:   691<br />lifeExp: 53<br />continent: Africa","gdpPercap: 13206<br />lifeExp: 57<br />continent: Africa","gdpPercap:   753<br />lifeExp: 59<br />continent: Africa","gdpPercap:  1328<br />lifeExp: 60<br />continent: Africa","gdpPercap:   943<br />lifeExp: 56<br />continent: Africa","gdpPercap:   579<br />lifeExp: 46<br />continent: Africa","gdpPercap:  1463<br />lifeExp: 54<br />continent: Africa","gdpPercap:  1569<br />lifeExp: 43<br />continent: Africa","gdpPercap:   415<br />lifeExp: 46<br />continent: Africa","gdpPercap: 12057<br />lifeExp: 74<br />continent: Africa","gdpPercap:  1045<br />lifeExp: 59<br />continent: Africa","gdpPercap:   759<br />lifeExp: 48<br />continent: Africa","gdpPercap:  1043<br />lifeExp: 54<br />continent: Africa","gdpPercap:  1803<br />lifeExp: 64<br />continent: Africa","gdpPercap: 10957<br />lifeExp: 73<br />continent: Africa","gdpPercap:  3820<br />lifeExp: 71<br />continent: Africa","gdpPercap:   824<br />lifeExp: 42<br />continent: Africa","gdpPercap:  4811<br />lifeExp: 53<br />continent: Africa","gdpPercap:   620<br />lifeExp: 57<br />continent: Africa","gdpPercap:  2014<br />lifeExp: 47<br />continent: Africa","gdpPercap:  7670<br />lifeExp: 76<br />continent: Africa","gdpPercap:   863<br />lifeExp: 46<br />continent: Africa","gdpPercap:  1598<br />lifeExp: 66<br />continent: Africa","gdpPercap:  1712<br />lifeExp: 63<br />continent: Africa","gdpPercap:   863<br />lifeExp: 43<br />continent: Africa","gdpPercap:   926<br />lifeExp: 48<br />continent: Africa","gdpPercap:  9270<br />lifeExp: 49<br />continent: Africa","gdpPercap:  2602<br />lifeExp: 59<br />continent: Africa","gdpPercap:  4513<br />lifeExp: 40<br />continent: Africa","gdpPercap:  1107<br />lifeExp: 53<br />continent: Africa","gdpPercap:   883<br />lifeExp: 58<br />continent: Africa","gdpPercap:  7093<br />lifeExp: 74<br />continent: Africa","gdpPercap:  1056<br />lifeExp: 52<br />continent: Africa","gdpPercap:  1271<br />lifeExp: 42<br />continent: Africa","gdpPercap:   470<br />lifeExp: 43<br />continent: Africa"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":0.7,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4.10650977201769,3.58230625931688,3.95740617340857,4.56013669242519,4.11963981438709,3.84550611104731,3.98430499758718,3.95173097080165,3.77998406330737,3.83716291957619,3.75802981175127,3.71483669984604,3.0797733480287,3.55002410662006,3.86456330372846,4.07836889751077,3.43922544380543,3.99163295350919,3.6204315729333,3.86975405900188,4.28620284789525,4.25547776303394,4.632979883279,4.02577526370184,4.05750656798335],"y":[75.32,65.554,72.39,80.653,78.553,72.889,78.782,78.273,72.235,74.994,71.878,70.259,60.916,70.198,72.567,76.195,72.899,75.537,71.752,71.421,78.746,69.819,78.242,76.384,73.747],"text":["gdpPercap: 12779<br />lifeExp: 75<br />continent: Americas","gdpPercap:  3822<br />lifeExp: 66<br />continent: Americas","gdpPercap:  9066<br />lifeExp: 72<br />continent: Americas","gdpPercap: 36319<br />lifeExp: 81<br />continent: Americas","gdpPercap: 13172<br />lifeExp: 79<br />continent: Americas","gdpPercap:  7007<br />lifeExp: 73<br />continent: Americas","gdpPercap:  9645<br />lifeExp: 79<br />continent: Americas","gdpPercap:  8948<br />lifeExp: 78<br />continent: Americas","gdpPercap:  6025<br />lifeExp: 72<br />continent: Americas","gdpPercap:  6873<br />lifeExp: 75<br />continent: Americas","gdpPercap:  5728<br />lifeExp: 72<br />continent: Americas","gdpPercap:  5186<br />lifeExp: 70<br />continent: Americas","gdpPercap:  1202<br />lifeExp: 61<br />continent: Americas","gdpPercap:  3548<br />lifeExp: 70<br />continent: Americas","gdpPercap:  7321<br />lifeExp: 73<br />continent: Americas","gdpPercap: 11978<br />lifeExp: 76<br />continent: Americas","gdpPercap:  2749<br />lifeExp: 73<br />continent: Americas","gdpPercap:  9809<br />lifeExp: 76<br />continent: Americas","gdpPercap:  4173<br />lifeExp: 72<br />continent: Americas","gdpPercap:  7409<br />lifeExp: 71<br />continent: Americas","gdpPercap: 19329<br />lifeExp: 79<br />continent: Americas","gdpPercap: 18009<br />lifeExp: 70<br />continent: Americas","gdpPercap: 42952<br />lifeExp: 78<br />continent: Americas","gdpPercap: 10611<br />lifeExp: 76<br />continent: Americas","gdpPercap: 11416<br />lifeExp: 74<br />continent: Americas"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(124,174,0,1)","opacity":0.7,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(124,174,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":true,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.98881764549129,4.47415867018597,3.143406361057,3.23395473727517,3.6954041667466,4.59906367268864,3.38955773121288,3.54908318988216,4.06467188236304,3.65041068311967,4.40693643553008,4.50045697098462,3.65508665949928,3.20223362703668,4.3682522837381,4.67492531406996,4.01957563822304,4.09522710701315,3.49076900592376,2.97497199429807,3.03796794384465,4.34862010618943,3.41596567540354,3.50385616482709,4.33555481758265,4.67341887079622,3.59880094359832,3.62164856315343,4.45815837772449,3.87264545733796,3.38767031916547,3.4807755960326,3.35808147396803],"y":[43.828,75.635,64.062,59.723,72.961,82.208,64.698,70.65,70.964,59.545,80.745,82.603,72.535,67.297,78.623,77.588,71.993,74.241,66.803,62.069,63.785,75.64,65.483,71.688,72.777,79.972,72.396,74.143,78.4,70.616,74.249,73.422,62.698],"text":["gdpPercap:   975<br />lifeExp: 44<br />continent: Asia","gdpPercap: 29796<br />lifeExp: 76<br />continent: Asia","gdpPercap:  1391<br />lifeExp: 64<br />continent: Asia","gdpPercap:  1714<br />lifeExp: 60<br />continent: Asia","gdpPercap:  4959<br />lifeExp: 73<br />continent: Asia","gdpPercap: 39725<br />lifeExp: 82<br />continent: Asia","gdpPercap:  2452<br />lifeExp: 65<br />continent: Asia","gdpPercap:  3541<br />lifeExp: 71<br />continent: Asia","gdpPercap: 11606<br />lifeExp: 71<br />continent: Asia","gdpPercap:  4471<br />lifeExp: 60<br />continent: Asia","gdpPercap: 25523<br />lifeExp: 81<br />continent: Asia","gdpPercap: 31656<br />lifeExp: 83<br />continent: Asia","gdpPercap:  4519<br />lifeExp: 73<br />continent: Asia","gdpPercap:  1593<br />lifeExp: 67<br />continent: Asia","gdpPercap: 23348<br />lifeExp: 79<br />continent: Asia","gdpPercap: 47307<br />lifeExp: 78<br />continent: Asia","gdpPercap: 10461<br />lifeExp: 72<br />continent: Asia","gdpPercap: 12452<br />lifeExp: 74<br />continent: Asia","gdpPercap:  3096<br />lifeExp: 67<br />continent: Asia","gdpPercap:   944<br />lifeExp: 62<br />continent: Asia","gdpPercap:  1091<br />lifeExp: 64<br />continent: Asia","gdpPercap: 22316<br />lifeExp: 76<br />continent: Asia","gdpPercap:  2606<br />lifeExp: 65<br />continent: Asia","gdpPercap:  3190<br />lifeExp: 72<br />continent: Asia","gdpPercap: 21655<br />lifeExp: 73<br />continent: Asia","gdpPercap: 47143<br />lifeExp: 80<br />continent: Asia","gdpPercap:  3970<br />lifeExp: 72<br />continent: Asia","gdpPercap:  4185<br />lifeExp: 74<br />continent: Asia","gdpPercap: 28718<br />lifeExp: 78<br />continent: Asia","gdpPercap:  7458<br />lifeExp: 71<br />continent: Asia","gdpPercap:  2442<br />lifeExp: 74<br />continent: Asia","gdpPercap:  3025<br />lifeExp: 73<br />continent: Asia","gdpPercap:  2281<br />lifeExp: 63<br />continent: Asia"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,196,1)","opacity":0.7,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,196,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[3.77356920876217,4.55782580062218,4.52753459151331,3.87194045947979,4.02860349094832,4.16492428251317,4.35856884462783,4.54750911081685,4.52123074598147,4.48387269225076,4.50745611553652,4.43993889119905,4.25548825822109,4.55847803563392,4.60933819969144,4.45590597950278,3.96632461957789,4.56582342810493,4.69335042800253,4.18723649435127,4.31195820191596,4.03376444688129,3.990628940935,4.27133768016358,4.41108505321789,4.4597100052953,4.52968372605252,4.57410560181062,3.92728187211911,4.52118074293136],"y":[76.423,79.829,79.441,74.852,73.005,75.748,76.486,78.332,79.313,80.657,79.406,79.483,73.338,81.757,78.885,80.546,74.543,79.762,80.196,75.563,78.098,72.476,74.002,74.663,77.926,80.941,80.884,81.701,71.777,79.425],"text":["gdpPercap:  5937<br />lifeExp: 76<br />continent: Europe","gdpPercap: 36126<br />lifeExp: 80<br />continent: Europe","gdpPercap: 33693<br />lifeExp: 79<br />continent: Europe","gdpPercap:  7446<br />lifeExp: 75<br />continent: Europe","gdpPercap: 10681<br />lifeExp: 73<br />continent: Europe","gdpPercap: 14619<br />lifeExp: 76<br />continent: Europe","gdpPercap: 22833<br />lifeExp: 76<br />continent: Europe","gdpPercap: 35278<br />lifeExp: 78<br />continent: Europe","gdpPercap: 33207<br />lifeExp: 79<br />continent: Europe","gdpPercap: 30470<br />lifeExp: 81<br />continent: Europe","gdpPercap: 32170<br />lifeExp: 79<br />continent: Europe","gdpPercap: 27538<br />lifeExp: 79<br />continent: Europe","gdpPercap: 18009<br />lifeExp: 73<br />continent: Europe","gdpPercap: 36181<br />lifeExp: 82<br />continent: Europe","gdpPercap: 40676<br />lifeExp: 79<br />continent: Europe","gdpPercap: 28570<br />lifeExp: 81<br />continent: Europe","gdpPercap:  9254<br />lifeExp: 75<br />continent: Europe","gdpPercap: 36798<br />lifeExp: 80<br />continent: Europe","gdpPercap: 49357<br />lifeExp: 80<br />continent: Europe","gdpPercap: 15390<br />lifeExp: 76<br />continent: Europe","gdpPercap: 20510<br />lifeExp: 78<br />continent: Europe","gdpPercap: 10808<br />lifeExp: 72<br />continent: Europe","gdpPercap:  9787<br />lifeExp: 74<br />continent: Europe","gdpPercap: 18678<br />lifeExp: 75<br />continent: Europe","gdpPercap: 25768<br />lifeExp: 78<br />continent: Europe","gdpPercap: 28821<br />lifeExp: 81<br />continent: Europe","gdpPercap: 33860<br />lifeExp: 81<br />continent: Europe","gdpPercap: 37506<br />lifeExp: 82<br />continent: Europe","gdpPercap:  8458<br />lifeExp: 72<br />continent: Europe","gdpPercap: 33203<br />lifeExp: 79<br />continent: Europe"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(199,124,255,1)","opacity":0.7,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(199,124,255,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[2.44334414004637,2.46457759683872,2.48581105363106,2.5070445104234,2.52827796721575,2.54951142400809,2.57074488080044,2.59197833759278,2.61321179438512,2.63444525117747,2.65567870796981,2.67691216476216,2.6981456215545,2.71937907834684,2.74061253513919,2.76184599193153,2.78307944872387,2.80431290551622,2.82554636230856,2.84677981910091,2.86801327589325,2.88924673268559,2.91048018947794,2.93171364627028,2.95294710306263,2.97418055985497,2.99541401664731,3.01664747343966,3.037880930232,3.05911438702435,3.08034784381669,3.10158130060903,3.12281475740138,3.14404821419372,3.16528167098607,3.18651512777841,3.20774858457075,3.2289820413631,3.25021549815544,3.27144895494779,3.29268241174013,3.31391586853247,3.33514932532482,3.35638278211716,3.3776162389095,3.39884969570185,3.42008315249419,3.44131660928654,3.46255006607888,3.48378352287122,3.50501697966357,3.52625043645591,3.54748389324826,3.5687173500406,3.58995080683294,3.61118426362529,3.63241772041763,3.65365117720998,3.67488463400232,3.69611809079466,3.71735154758701,3.73858500437935,3.7598184611717,3.78105191796404,3.80228537475638,3.82351883154873,3.84475228834107,3.86598574513341,3.88721920192576,3.9084526587181,3.92968611551045,3.95091957230279,3.97215302909513,3.99338648588748,4.01461994267982,4.03585339947217,4.05708685626451,4.07832031305685,4.0995537698492,4.12078722664154],"y":[46.8785450307024,47.0868670941706,47.2951891576389,47.5035112211071,47.7118332845753,47.9201553480436,48.1284774115118,48.33679947498,48.5451215384482,48.7534436019165,48.9617656653847,49.1700877288529,49.3784097923211,49.5867318557894,49.7950539192576,50.0033759827258,50.211698046194,50.4200201096623,50.6283421731305,50.8366642365987,51.044986300067,51.2533083635352,51.4616304270034,51.6699524904716,51.8782745539399,52.0865966174081,52.2949186808763,52.5032407443445,52.7115628078128,52.919884871281,53.1282069347492,53.3365289982174,53.5448510616857,53.7531731251539,53.9614951886221,54.1698172520904,54.3781393155586,54.5864613790268,54.794783442495,55.0031055059633,55.2114275694315,55.4197496328997,55.6280716963679,55.8363937598362,56.0447158233044,56.2530378867726,56.4613599502408,56.6696820137091,56.8780040771773,57.0863261406455,57.2946482041138,57.502970267582,57.7112923310502,57.9196143945184,58.1279364579867,58.3362585214549,58.5445805849231,58.7529026483914,58.9612247118596,59.1695467753278,59.377868838796,59.5861909022643,59.7945129657325,60.0028350292007,60.2111570926689,60.4194791561372,60.6278012196054,60.8361232830736,61.0444453465418,61.2527674100101,61.4610894734783,61.6694115369465,61.8777336004148,62.086055663883,62.2943777273512,62.5026997908194,62.7110218542877,62.9193439177559,63.1276659812241,63.3359880446923],"text":["gdpPercap: 2.4<br />lifeExp: 47<br />continent: Africa","gdpPercap: 2.5<br />lifeExp: 47<br />continent: Africa","gdpPercap: 2.5<br />lifeExp: 47<br />continent: Africa","gdpPercap: 2.5<br />lifeExp: 48<br />continent: Africa","gdpPercap: 2.5<br />lifeExp: 48<br />continent: Africa","gdpPercap: 2.5<br />lifeExp: 48<br />continent: Africa","gdpPercap: 2.6<br />lifeExp: 48<br />continent: Africa","gdpPercap: 2.6<br />lifeExp: 48<br />continent: Africa","gdpPercap: 2.6<br />lifeExp: 49<br />continent: Africa","gdpPercap: 2.6<br />lifeExp: 49<br />continent: Africa","gdpPercap: 2.7<br />lifeExp: 49<br />continent: Africa","gdpPercap: 2.7<br />lifeExp: 49<br />continent: Africa","gdpPercap: 2.7<br />lifeExp: 49<br />continent: Africa","gdpPercap: 2.7<br />lifeExp: 50<br />continent: Africa","gdpPercap: 2.7<br />lifeExp: 50<br />continent: Africa","gdpPercap: 2.8<br />lifeExp: 50<br />continent: Africa","gdpPercap: 2.8<br />lifeExp: 50<br />continent: Africa","gdpPercap: 2.8<br />lifeExp: 50<br />continent: Africa","gdpPercap: 2.8<br />lifeExp: 51<br />continent: Africa","gdpPercap: 2.8<br />lifeExp: 51<br />continent: Africa","gdpPercap: 2.9<br />lifeExp: 51<br />continent: Africa","gdpPercap: 2.9<br />lifeExp: 51<br />continent: Africa","gdpPercap: 2.9<br />lifeExp: 51<br />continent: Africa","gdpPercap: 2.9<br />lifeExp: 52<br />continent: Africa","gdpPercap: 3.0<br />lifeExp: 52<br />continent: Africa","gdpPercap: 3.0<br />lifeExp: 52<br />continent: Africa","gdpPercap: 3.0<br />lifeExp: 52<br />continent: Africa","gdpPercap: 3.0<br />lifeExp: 53<br />continent: Africa","gdpPercap: 3.0<br />lifeExp: 53<br />continent: Africa","gdpPercap: 3.1<br />lifeExp: 53<br />continent: Africa","gdpPercap: 3.1<br />lifeExp: 53<br />continent: Africa","gdpPercap: 3.1<br />lifeExp: 53<br />continent: Africa","gdpPercap: 3.1<br />lifeExp: 54<br />continent: Africa","gdpPercap: 3.1<br />lifeExp: 54<br />continent: Africa","gdpPercap: 3.2<br />lifeExp: 54<br />continent: Africa","gdpPercap: 3.2<br />lifeExp: 54<br />continent: Africa","gdpPercap: 3.2<br />lifeExp: 54<br />continent: Africa","gdpPercap: 3.2<br />lifeExp: 55<br />continent: Africa","gdpPercap: 3.3<br />lifeExp: 55<br />continent: Africa","gdpPercap: 3.3<br />lifeExp: 55<br />continent: Africa","gdpPercap: 3.3<br />lifeExp: 55<br />continent: Africa","gdpPercap: 3.3<br />lifeExp: 55<br />continent: Africa","gdpPercap: 3.3<br />lifeExp: 56<br />continent: Africa","gdpPercap: 3.4<br />lifeExp: 56<br />continent: Africa","gdpPercap: 3.4<br />lifeExp: 56<br />continent: Africa","gdpPercap: 3.4<br />lifeExp: 56<br />continent: Africa","gdpPercap: 3.4<br />lifeExp: 56<br />continent: Africa","gdpPercap: 3.4<br />lifeExp: 57<br />continent: Africa","gdpPercap: 3.5<br />lifeExp: 57<br />continent: Africa","gdpPercap: 3.5<br />lifeExp: 57<br />continent: Africa","gdpPercap: 3.5<br />lifeExp: 57<br />continent: Africa","gdpPercap: 3.5<br />lifeExp: 58<br />continent: Africa","gdpPercap: 3.5<br />lifeExp: 58<br />continent: Africa","gdpPercap: 3.6<br />lifeExp: 58<br />continent: Africa","gdpPercap: 3.6<br />lifeExp: 58<br />continent: Africa","gdpPercap: 3.6<br />lifeExp: 58<br />continent: Africa","gdpPercap: 3.6<br />lifeExp: 59<br />continent: Africa","gdpPercap: 3.7<br />lifeExp: 59<br />continent: Africa","gdpPercap: 3.7<br />lifeExp: 59<br />continent: Africa","gdpPercap: 3.7<br />lifeExp: 59<br />continent: Africa","gdpPercap: 3.7<br />lifeExp: 59<br />continent: Africa","gdpPercap: 3.7<br />lifeExp: 60<br />continent: Africa","gdpPercap: 3.8<br />lifeExp: 60<br />continent: Africa","gdpPercap: 3.8<br />lifeExp: 60<br />continent: Africa","gdpPercap: 3.8<br />lifeExp: 60<br />continent: Africa","gdpPercap: 3.8<br />lifeExp: 60<br />continent: Africa","gdpPercap: 3.8<br />lifeExp: 61<br />continent: Africa","gdpPercap: 3.9<br />lifeExp: 61<br />continent: Africa","gdpPercap: 3.9<br />lifeExp: 61<br />continent: Africa","gdpPercap: 3.9<br />lifeExp: 61<br />continent: Africa","gdpPercap: 3.9<br />lifeExp: 61<br />continent: Africa","gdpPercap: 4.0<br />lifeExp: 62<br />continent: Africa","gdpPercap: 4.0<br />lifeExp: 62<br />continent: Africa","gdpPercap: 4.0<br />lifeExp: 62<br />continent: Africa","gdpPercap: 4.0<br />lifeExp: 62<br />continent: Africa","gdpPercap: 4.0<br />lifeExp: 63<br />continent: Africa","gdpPercap: 4.1<br />lifeExp: 63<br />continent: Africa","gdpPercap: 4.1<br />lifeExp: 63<br />continent: Africa","gdpPercap: 4.1<br />lifeExp: 63<br />continent: Africa","gdpPercap: 4.1<br />lifeExp: 63<br />continent: Africa"],"type":"scatter","mode":"lines","name":"Africa","line":{"width":3.77952755905512,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.0797733480287,3.09943419024706,3.11909503246542,3.13875587468378,3.15841671690214,3.1780775591205,3.19773840133885,3.21739924355721,3.23706008577557,3.25672092799393,3.27638177021229,3.29604261243064,3.315703454649,3.33536429686736,3.35502513908572,3.37468598130408,3.39434682352244,3.41400766574079,3.43366850795915,3.45332935017751,3.47299019239587,3.49265103461423,3.51231187683259,3.53197271905094,3.5516335612693,3.57129440348766,3.59095524570602,3.61061608792438,3.63027693014273,3.64993777236109,3.66959861457945,3.68925945679781,3.70892029901617,3.72858114123453,3.74824198345288,3.76790282567124,3.7875636678896,3.80722451010796,3.82688535232632,3.84654619454468,3.86620703676303,3.88586787898139,3.90552872119975,3.92518956341811,3.94485040563647,3.96451124785482,3.98417209007318,4.00383293229154,4.0234937745099,4.04315461672826,4.06281545894662,4.08247630116497,4.10213714338333,4.12179798560169,4.14145882782005,4.16111967003841,4.18078051225677,4.20044135447512,4.22010219669348,4.23976303891184,4.2594238811302,4.27908472334856,4.29874556556691,4.31840640778527,4.33806725000363,4.35772809222199,4.37738893444035,4.39704977665871,4.41671061887706,4.43637146109542,4.45603230331378,4.47569314553214,4.4953539877505,4.51501482996886,4.53467567218721,4.55433651440557,4.57399735662393,4.59365819884229,4.61331904106065,4.632979883279],"y":[64.9344786784695,65.1379284630844,65.3413782476993,65.5448280323142,65.7482778169291,65.9517276015439,66.1551773861588,66.3586271707737,66.5620769553886,66.7655267400034,66.9689765246183,67.1724263092332,67.3758760938481,67.5793258784629,67.7827756630778,67.9862254476927,68.1896752323076,68.3931250169224,68.5965748015373,68.8000245861522,69.0034743707671,69.2069241553819,69.4103739399968,69.6138237246117,69.8172735092266,70.0207232938414,70.2241730784563,70.4276228630712,70.6310726476861,70.8345224323009,71.0379722169158,71.2414220015307,71.4448717861456,71.6483215707604,71.8517713553753,72.0552211399902,72.2586709246051,72.4621207092199,72.6655704938348,72.8690202784497,73.0724700630646,73.2759198476795,73.4793696322943,73.6828194169092,73.8862692015241,74.089718986139,74.2931687707538,74.4966185553687,74.7000683399836,74.9035181245985,75.1069679092133,75.3104176938282,75.5138674784431,75.717317263058,75.9207670476728,76.1242168322877,76.3276666169026,76.5311164015175,76.7345661861323,76.9380159707472,77.1414657553621,77.344915539977,77.5483653245918,77.7518151092067,77.9552648938216,78.1587146784365,78.3621644630513,78.5656142476662,78.7690640322811,78.972513816896,79.1759636015108,79.3794133861257,79.5828631707406,79.7863129553555,79.9897627399704,80.1932125245852,80.3966623092001,80.600112093815,80.8035618784298,81.0070116630447],"text":["gdpPercap: 3.1<br />lifeExp: 65<br />continent: Americas","gdpPercap: 3.1<br />lifeExp: 65<br />continent: Americas","gdpPercap: 3.1<br />lifeExp: 65<br />continent: Americas","gdpPercap: 3.1<br />lifeExp: 66<br />continent: Americas","gdpPercap: 3.2<br />lifeExp: 66<br />continent: Americas","gdpPercap: 3.2<br />lifeExp: 66<br />continent: Americas","gdpPercap: 3.2<br />lifeExp: 66<br />continent: Americas","gdpPercap: 3.2<br />lifeExp: 66<br />continent: Americas","gdpPercap: 3.2<br />lifeExp: 67<br />continent: Americas","gdpPercap: 3.3<br />lifeExp: 67<br />continent: Americas","gdpPercap: 3.3<br />lifeExp: 67<br />continent: Americas","gdpPercap: 3.3<br />lifeExp: 67<br />continent: Americas","gdpPercap: 3.3<br />lifeExp: 67<br />continent: Americas","gdpPercap: 3.3<br />lifeExp: 68<br />continent: Americas","gdpPercap: 3.4<br />lifeExp: 68<br />continent: Americas","gdpPercap: 3.4<br />lifeExp: 68<br />continent: Americas","gdpPercap: 3.4<br />lifeExp: 68<br />continent: Americas","gdpPercap: 3.4<br />lifeExp: 68<br />continent: Americas","gdpPercap: 3.4<br />lifeExp: 69<br />continent: Americas","gdpPercap: 3.5<br />lifeExp: 69<br />continent: Americas","gdpPercap: 3.5<br />lifeExp: 69<br />continent: Americas","gdpPercap: 3.5<br />lifeExp: 69<br />continent: Americas","gdpPercap: 3.5<br />lifeExp: 69<br />continent: Americas","gdpPercap: 3.5<br />lifeExp: 70<br />continent: Americas","gdpPercap: 3.6<br />lifeExp: 70<br />continent: Americas","gdpPercap: 3.6<br />lifeExp: 70<br />continent: Americas","gdpPercap: 3.6<br />lifeExp: 70<br />continent: Americas","gdpPercap: 3.6<br />lifeExp: 70<br />continent: Americas","gdpPercap: 3.6<br />lifeExp: 71<br />continent: Americas","gdpPercap: 3.6<br />lifeExp: 71<br />continent: Americas","gdpPercap: 3.7<br />lifeExp: 71<br />continent: Americas","gdpPercap: 3.7<br />lifeExp: 71<br />continent: Americas","gdpPercap: 3.7<br />lifeExp: 71<br />continent: Americas","gdpPercap: 3.7<br />lifeExp: 72<br />continent: Americas","gdpPercap: 3.7<br />lifeExp: 72<br />continent: Americas","gdpPercap: 3.8<br />lifeExp: 72<br />continent: Americas","gdpPercap: 3.8<br />lifeExp: 72<br />continent: Americas","gdpPercap: 3.8<br />lifeExp: 72<br />continent: Americas","gdpPercap: 3.8<br />lifeExp: 73<br />continent: Americas","gdpPercap: 3.8<br />lifeExp: 73<br />continent: Americas","gdpPercap: 3.9<br />lifeExp: 73<br />continent: Americas","gdpPercap: 3.9<br />lifeExp: 73<br />continent: Americas","gdpPercap: 3.9<br />lifeExp: 73<br />continent: Americas","gdpPercap: 3.9<br />lifeExp: 74<br />continent: Americas","gdpPercap: 3.9<br />lifeExp: 74<br />continent: Americas","gdpPercap: 4.0<br />lifeExp: 74<br />continent: Americas","gdpPercap: 4.0<br />lifeExp: 74<br />continent: Americas","gdpPercap: 4.0<br />lifeExp: 74<br />continent: Americas","gdpPercap: 4.0<br />lifeExp: 75<br />continent: Americas","gdpPercap: 4.0<br />lifeExp: 75<br />continent: Americas","gdpPercap: 4.1<br />lifeExp: 75<br />continent: Americas","gdpPercap: 4.1<br />lifeExp: 75<br />continent: Americas","gdpPercap: 4.1<br />lifeExp: 76<br />continent: Americas","gdpPercap: 4.1<br />lifeExp: 76<br />continent: Americas","gdpPercap: 4.1<br />lifeExp: 76<br />continent: Americas","gdpPercap: 4.2<br />lifeExp: 76<br />continent: Americas","gdpPercap: 4.2<br />lifeExp: 76<br />continent: Americas","gdpPercap: 4.2<br />lifeExp: 77<br />continent: Americas","gdpPercap: 4.2<br />lifeExp: 77<br />continent: Americas","gdpPercap: 4.2<br />lifeExp: 77<br />continent: Americas","gdpPercap: 4.3<br />lifeExp: 77<br />continent: Americas","gdpPercap: 4.3<br />lifeExp: 77<br />continent: Americas","gdpPercap: 4.3<br />lifeExp: 78<br />continent: Americas","gdpPercap: 4.3<br />lifeExp: 78<br />continent: Americas","gdpPercap: 4.3<br />lifeExp: 78<br />continent: Americas","gdpPercap: 4.4<br />lifeExp: 78<br />continent: Americas","gdpPercap: 4.4<br />lifeExp: 78<br />continent: Americas","gdpPercap: 4.4<br />lifeExp: 79<br />continent: Americas","gdpPercap: 4.4<br />lifeExp: 79<br />continent: Americas","gdpPercap: 4.4<br />lifeExp: 79<br />continent: Americas","gdpPercap: 4.5<br />lifeExp: 79<br />continent: Americas","gdpPercap: 4.5<br />lifeExp: 79<br />continent: Americas","gdpPercap: 4.5<br />lifeExp: 80<br />continent: Americas","gdpPercap: 4.5<br />lifeExp: 80<br />continent: Americas","gdpPercap: 4.5<br />lifeExp: 80<br />continent: Americas","gdpPercap: 4.6<br />lifeExp: 80<br />continent: Americas","gdpPercap: 4.6<br />lifeExp: 80<br />continent: Americas","gdpPercap: 4.6<br />lifeExp: 81<br />continent: Americas","gdpPercap: 4.6<br />lifeExp: 81<br />continent: Americas","gdpPercap: 4.6<br />lifeExp: 81<br />continent: Americas"],"type":"scatter","mode":"lines","name":"Americas","line":{"width":3.77952755905512,"color":"rgba(124,174,0,1)","dash":"solid"},"hoveron":"points","legendgroup":"Americas","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.97497199429807,2.99649039075088,3.01800878720369,3.03952718365649,3.0610455801093,3.08256397656211,3.10408237301492,3.12560076946773,3.14711916592054,3.16863756237335,3.19015595882616,3.21167435527896,3.23319275173177,3.25471114818458,3.27622954463739,3.2977479410902,3.31926633754301,3.34078473399582,3.36230313044863,3.38382152690143,3.40533992335424,3.42685831980705,3.44837671625986,3.46989511271267,3.49141350916548,3.51293190561829,3.5344503020711,3.5559686985239,3.57748709497671,3.59900549142952,3.62052388788233,3.64204228433514,3.66356068078795,3.68507907724076,3.70659747369357,3.72811587014637,3.74963426659918,3.77115266305199,3.7926710595048,3.81418945595761,3.83570785241042,3.85722624886323,3.87874464531604,3.90026304176884,3.92178143822165,3.94329983467446,3.96481823112727,3.98633662758008,4.00785502403289,4.0293734204857,4.0508918169385,4.07241021339131,4.09392860984412,4.11544700629693,4.13696540274974,4.15848379920255,4.18000219565536,4.20152059210817,4.22303898856097,4.24455738501378,4.26607578146659,4.2875941779194,4.30911257437221,4.33063097082502,4.35214936727783,4.37366776373064,4.39518616018344,4.41670455663625,4.43822295308906,4.45974134954187,4.48125974599468,4.50277814244749,4.5242965389003,4.54581493535311,4.56733333180591,4.58885172825872,4.61037012471153,4.63188852116434,4.65340691761715,4.67492531406996],"y":[60.9779889594227,61.2335205078187,61.4890520562147,61.7445836046107,62.0001151530067,62.2556467014027,62.5111782497987,62.7667097981947,63.0222413465907,63.2777728949867,63.5333044433827,63.7888359917787,64.0443675401747,64.2998990885707,64.5554306369667,64.8109621853627,65.0664937337587,65.3220252821547,65.5775568305507,65.8330883789467,66.0886199273427,66.3441514757387,66.5996830241347,66.8552145725307,67.1107461209267,67.3662776693227,67.6218092177187,67.8773407661147,68.1328723145107,68.3884038629067,68.6439354113027,68.8994669596988,69.1549985080947,69.4105300564908,69.6660616048868,69.9215931532828,70.1771247016788,70.4326562500748,70.6881877984708,70.9437193468668,71.1992508952628,71.4547824436588,71.7103139920548,71.9658455404508,72.2213770888468,72.4769086372428,72.7324401856388,72.9879717340348,73.2435032824308,73.4990348308268,73.7545663792228,74.0100979276188,74.2656294760148,74.5211610244108,74.7766925728068,75.0322241212028,75.2877556695988,75.5432872179948,75.7988187663908,76.0543503147868,76.3098818631828,76.5654134115788,76.8209449599748,77.0764765083708,77.3320080567669,77.5875396051629,77.8430711535589,78.0986027019549,78.3541342503509,78.6096657987469,78.8651973471429,79.1207288955389,79.3762604439349,79.6317919923309,79.8873235407269,80.1428550891229,80.3983866375189,80.6539181859149,80.9094497343109,81.1649812827069],"text":["gdpPercap: 3.0<br />lifeExp: 61<br />continent: Asia","gdpPercap: 3.0<br />lifeExp: 61<br />continent: Asia","gdpPercap: 3.0<br />lifeExp: 61<br />continent: Asia","gdpPercap: 3.0<br />lifeExp: 62<br />continent: Asia","gdpPercap: 3.1<br />lifeExp: 62<br />continent: Asia","gdpPercap: 3.1<br />lifeExp: 62<br />continent: Asia","gdpPercap: 3.1<br />lifeExp: 63<br />continent: Asia","gdpPercap: 3.1<br />lifeExp: 63<br />continent: Asia","gdpPercap: 3.1<br />lifeExp: 63<br />continent: Asia","gdpPercap: 3.2<br />lifeExp: 63<br />continent: Asia","gdpPercap: 3.2<br />lifeExp: 64<br />continent: Asia","gdpPercap: 3.2<br />lifeExp: 64<br />continent: Asia","gdpPercap: 3.2<br />lifeExp: 64<br />continent: Asia","gdpPercap: 3.3<br />lifeExp: 64<br />continent: Asia","gdpPercap: 3.3<br />lifeExp: 65<br />continent: Asia","gdpPercap: 3.3<br />lifeExp: 65<br />continent: Asia","gdpPercap: 3.3<br />lifeExp: 65<br />continent: Asia","gdpPercap: 3.3<br />lifeExp: 65<br />continent: Asia","gdpPercap: 3.4<br />lifeExp: 66<br />continent: Asia","gdpPercap: 3.4<br />lifeExp: 66<br />continent: Asia","gdpPercap: 3.4<br />lifeExp: 66<br />continent: Asia","gdpPercap: 3.4<br />lifeExp: 66<br />continent: Asia","gdpPercap: 3.4<br />lifeExp: 67<br />continent: Asia","gdpPercap: 3.5<br />lifeExp: 67<br />continent: Asia","gdpPercap: 3.5<br />lifeExp: 67<br />continent: Asia","gdpPercap: 3.5<br />lifeExp: 67<br />continent: Asia","gdpPercap: 3.5<br />lifeExp: 68<br />continent: Asia","gdpPercap: 3.6<br />lifeExp: 68<br />continent: Asia","gdpPercap: 3.6<br />lifeExp: 68<br />continent: Asia","gdpPercap: 3.6<br />lifeExp: 68<br />continent: Asia","gdpPercap: 3.6<br />lifeExp: 69<br />continent: Asia","gdpPercap: 3.6<br />lifeExp: 69<br />continent: Asia","gdpPercap: 3.7<br />lifeExp: 69<br />continent: Asia","gdpPercap: 3.7<br />lifeExp: 69<br />continent: Asia","gdpPercap: 3.7<br />lifeExp: 70<br />continent: Asia","gdpPercap: 3.7<br />lifeExp: 70<br />continent: Asia","gdpPercap: 3.7<br />lifeExp: 70<br />continent: Asia","gdpPercap: 3.8<br />lifeExp: 70<br />continent: Asia","gdpPercap: 3.8<br />lifeExp: 71<br />continent: Asia","gdpPercap: 3.8<br />lifeExp: 71<br />continent: Asia","gdpPercap: 3.8<br />lifeExp: 71<br />continent: Asia","gdpPercap: 3.9<br />lifeExp: 71<br />continent: Asia","gdpPercap: 3.9<br />lifeExp: 72<br />continent: Asia","gdpPercap: 3.9<br />lifeExp: 72<br />continent: Asia","gdpPercap: 3.9<br />lifeExp: 72<br />continent: Asia","gdpPercap: 3.9<br />lifeExp: 72<br />continent: Asia","gdpPercap: 4.0<br />lifeExp: 73<br />continent: Asia","gdpPercap: 4.0<br />lifeExp: 73<br />continent: Asia","gdpPercap: 4.0<br />lifeExp: 73<br />continent: Asia","gdpPercap: 4.0<br />lifeExp: 73<br />continent: Asia","gdpPercap: 4.1<br />lifeExp: 74<br />continent: Asia","gdpPercap: 4.1<br />lifeExp: 74<br />continent: Asia","gdpPercap: 4.1<br />lifeExp: 74<br />continent: Asia","gdpPercap: 4.1<br />lifeExp: 75<br />continent: Asia","gdpPercap: 4.1<br />lifeExp: 75<br />continent: Asia","gdpPercap: 4.2<br />lifeExp: 75<br />continent: Asia","gdpPercap: 4.2<br />lifeExp: 75<br />continent: Asia","gdpPercap: 4.2<br />lifeExp: 76<br />continent: Asia","gdpPercap: 4.2<br />lifeExp: 76<br />continent: Asia","gdpPercap: 4.2<br />lifeExp: 76<br />continent: Asia","gdpPercap: 4.3<br />lifeExp: 76<br />continent: Asia","gdpPercap: 4.3<br />lifeExp: 77<br />continent: Asia","gdpPercap: 4.3<br />lifeExp: 77<br />continent: Asia","gdpPercap: 4.3<br />lifeExp: 77<br />continent: Asia","gdpPercap: 4.4<br />lifeExp: 77<br />continent: Asia","gdpPercap: 4.4<br />lifeExp: 78<br />continent: Asia","gdpPercap: 4.4<br />lifeExp: 78<br />continent: Asia","gdpPercap: 4.4<br />lifeExp: 78<br />continent: Asia","gdpPercap: 4.4<br />lifeExp: 78<br />continent: Asia","gdpPercap: 4.5<br />lifeExp: 79<br />continent: Asia","gdpPercap: 4.5<br />lifeExp: 79<br />continent: Asia","gdpPercap: 4.5<br />lifeExp: 79<br />continent: Asia","gdpPercap: 4.5<br />lifeExp: 79<br />continent: Asia","gdpPercap: 4.5<br />lifeExp: 80<br />continent: Asia","gdpPercap: 4.6<br />lifeExp: 80<br />continent: Asia","gdpPercap: 4.6<br />lifeExp: 80<br />continent: Asia","gdpPercap: 4.6<br />lifeExp: 80<br />continent: Asia","gdpPercap: 4.6<br />lifeExp: 81<br />continent: Asia","gdpPercap: 4.7<br />lifeExp: 81<br />continent: Asia","gdpPercap: 4.7<br />lifeExp: 81<br />continent: Asia"],"type":"scatter","mode":"lines","name":"Asia","line":{"width":3.77952755905512,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[3.77356920876217,3.78521200900572,3.79685480924927,3.80849760949282,3.82014040973636,3.83178320997991,3.84342601022346,3.85506881046701,3.86671161071056,3.87835441095411,3.88999721119766,3.90164001144121,3.91328281168476,3.9249256119283,3.93656841217185,3.9482112124154,3.95985401265895,3.9714968129025,3.98313961314605,3.9947824133896,4.00642521363315,4.0180680138767,4.02971081412024,4.04135361436379,4.05299641460734,4.06463921485089,4.07628201509444,4.08792481533799,4.09956761558154,4.11121041582509,4.12285321606864,4.13449601631218,4.14613881655573,4.15778161679928,4.16942441704283,4.18106721728638,4.19271001752993,4.20435281777348,4.21599561801703,4.22763841826058,4.23928121850413,4.25092401874767,4.26256681899122,4.27420961923477,4.28585241947832,4.29749521972187,4.30913801996542,4.32078082020897,4.33242362045252,4.34406642069606,4.35570922093961,4.36735202118316,4.37899482142671,4.39063762167026,4.40228042191381,4.41392322215736,4.42556602240091,4.43720882264446,4.448851622888,4.46049442313155,4.4721372233751,4.48378002361865,4.4954228238622,4.50706562410575,4.5187084243493,4.53035122459285,4.5419940248364,4.55363682507994,4.56527962532349,4.57692242556704,4.58856522581059,4.60020802605414,4.61185082629769,4.62349362654124,4.63513642678479,4.64677922702834,4.65842202727189,4.67006482751543,4.68170762775898,4.69335042800253],"y":[72.1662628645359,72.2795796473475,72.3928964301591,72.5062132129707,72.6195299957823,72.7328467785939,72.8461635614055,72.9594803442172,73.0727971270288,73.1861139098404,73.299430692652,73.4127474754636,73.5260642582752,73.6393810410868,73.7526978238985,73.8660146067101,73.9793313895217,74.0926481723333,74.2059649551449,74.3192817379565,74.4325985207682,74.5459153035798,74.6592320863914,74.772548869203,74.8858656520146,74.9991824348262,75.1124992176378,75.2258160004494,75.3391327832611,75.4524495660727,75.5657663488843,75.6790831316959,75.7923999145075,75.9057166973191,76.0190334801307,76.1323502629424,76.245667045754,76.3589838285656,76.4723006113772,76.5856173941888,76.6989341770004,76.812250959812,76.9255677426237,77.0388845254353,77.1522013082469,77.2655180910585,77.3788348738701,77.4921516566817,77.6054684394933,77.7187852223049,77.8321020051166,77.9454187879282,78.0587355707398,78.1720523535514,78.285369136363,78.3986859191746,78.5120027019862,78.6253194847979,78.7386362676095,78.8519530504211,78.9652698332327,79.0785866160443,79.1919033988559,79.3052201816676,79.4185369644792,79.5318537472908,79.6451705301024,79.758487312914,79.8718040957256,79.9851208785372,80.0984376613488,80.2117544441604,80.3250712269721,80.4383880097837,80.5517047925953,80.6650215754069,80.7783383582185,80.8916551410301,81.0049719238418,81.1182887066534],"text":["gdpPercap: 3.8<br />lifeExp: 72<br />continent: Europe","gdpPercap: 3.8<br />lifeExp: 72<br />continent: Europe","gdpPercap: 3.8<br />lifeExp: 72<br />continent: Europe","gdpPercap: 3.8<br />lifeExp: 73<br />continent: Europe","gdpPercap: 3.8<br />lifeExp: 73<br />continent: Europe","gdpPercap: 3.8<br />lifeExp: 73<br />continent: Europe","gdpPercap: 3.8<br />lifeExp: 73<br />continent: Europe","gdpPercap: 3.9<br />lifeExp: 73<br />continent: Europe","gdpPercap: 3.9<br />lifeExp: 73<br />continent: Europe","gdpPercap: 3.9<br />lifeExp: 73<br />continent: Europe","gdpPercap: 3.9<br />lifeExp: 73<br />continent: Europe","gdpPercap: 3.9<br />lifeExp: 73<br />continent: Europe","gdpPercap: 3.9<br />lifeExp: 74<br />continent: Europe","gdpPercap: 3.9<br />lifeExp: 74<br />continent: Europe","gdpPercap: 3.9<br />lifeExp: 74<br />continent: Europe","gdpPercap: 3.9<br />lifeExp: 74<br />continent: Europe","gdpPercap: 4.0<br />lifeExp: 74<br />continent: Europe","gdpPercap: 4.0<br />lifeExp: 74<br />continent: Europe","gdpPercap: 4.0<br />lifeExp: 74<br />continent: Europe","gdpPercap: 4.0<br />lifeExp: 74<br />continent: Europe","gdpPercap: 4.0<br />lifeExp: 74<br />continent: Europe","gdpPercap: 4.0<br />lifeExp: 75<br />continent: Europe","gdpPercap: 4.0<br />lifeExp: 75<br />continent: Europe","gdpPercap: 4.0<br />lifeExp: 75<br />continent: Europe","gdpPercap: 4.1<br />lifeExp: 75<br />continent: Europe","gdpPercap: 4.1<br />lifeExp: 75<br />continent: Europe","gdpPercap: 4.1<br />lifeExp: 75<br />continent: Europe","gdpPercap: 4.1<br />lifeExp: 75<br />continent: Europe","gdpPercap: 4.1<br />lifeExp: 75<br />continent: Europe","gdpPercap: 4.1<br />lifeExp: 75<br />continent: Europe","gdpPercap: 4.1<br />lifeExp: 76<br />continent: Europe","gdpPercap: 4.1<br />lifeExp: 76<br />continent: Europe","gdpPercap: 4.1<br />lifeExp: 76<br />continent: Europe","gdpPercap: 4.2<br />lifeExp: 76<br />continent: Europe","gdpPercap: 4.2<br />lifeExp: 76<br />continent: Europe","gdpPercap: 4.2<br />lifeExp: 76<br />continent: Europe","gdpPercap: 4.2<br />lifeExp: 76<br />continent: Europe","gdpPercap: 4.2<br />lifeExp: 76<br />continent: Europe","gdpPercap: 4.2<br />lifeExp: 76<br />continent: Europe","gdpPercap: 4.2<br />lifeExp: 77<br />continent: Europe","gdpPercap: 4.2<br />lifeExp: 77<br />continent: Europe","gdpPercap: 4.3<br />lifeExp: 77<br />continent: Europe","gdpPercap: 4.3<br />lifeExp: 77<br />continent: Europe","gdpPercap: 4.3<br />lifeExp: 77<br />continent: Europe","gdpPercap: 4.3<br />lifeExp: 77<br />continent: Europe","gdpPercap: 4.3<br />lifeExp: 77<br />continent: Europe","gdpPercap: 4.3<br />lifeExp: 77<br />continent: Europe","gdpPercap: 4.3<br />lifeExp: 77<br />continent: Europe","gdpPercap: 4.3<br />lifeExp: 78<br />continent: Europe","gdpPercap: 4.3<br />lifeExp: 78<br />continent: Europe","gdpPercap: 4.4<br />lifeExp: 78<br />continent: Europe","gdpPercap: 4.4<br />lifeExp: 78<br />continent: Europe","gdpPercap: 4.4<br />lifeExp: 78<br />continent: Europe","gdpPercap: 4.4<br />lifeExp: 78<br />continent: Europe","gdpPercap: 4.4<br />lifeExp: 78<br />continent: Europe","gdpPercap: 4.4<br />lifeExp: 78<br />continent: Europe","gdpPercap: 4.4<br />lifeExp: 79<br />continent: Europe","gdpPercap: 4.4<br />lifeExp: 79<br />continent: Europe","gdpPercap: 4.4<br />lifeExp: 79<br />continent: Europe","gdpPercap: 4.5<br />lifeExp: 79<br />continent: Europe","gdpPercap: 4.5<br />lifeExp: 79<br />continent: Europe","gdpPercap: 4.5<br />lifeExp: 79<br />continent: Europe","gdpPercap: 4.5<br />lifeExp: 79<br />continent: Europe","gdpPercap: 4.5<br />lifeExp: 79<br />continent: Europe","gdpPercap: 4.5<br />lifeExp: 79<br />continent: Europe","gdpPercap: 4.5<br />lifeExp: 80<br />continent: Europe","gdpPercap: 4.5<br />lifeExp: 80<br />continent: Europe","gdpPercap: 4.6<br />lifeExp: 80<br />continent: Europe","gdpPercap: 4.6<br />lifeExp: 80<br />continent: Europe","gdpPercap: 4.6<br />lifeExp: 80<br />continent: Europe","gdpPercap: 4.6<br />lifeExp: 80<br />continent: Europe","gdpPercap: 4.6<br />lifeExp: 80<br />continent: Europe","gdpPercap: 4.6<br />lifeExp: 80<br />continent: Europe","gdpPercap: 4.6<br />lifeExp: 80<br />continent: Europe","gdpPercap: 4.6<br />lifeExp: 81<br />continent: Europe","gdpPercap: 4.6<br />lifeExp: 81<br />continent: Europe","gdpPercap: 4.7<br />lifeExp: 81<br />continent: Europe","gdpPercap: 4.7<br />lifeExp: 81<br />continent: Europe","gdpPercap: 4.7<br />lifeExp: 81<br />continent: Europe","gdpPercap: 4.7<br />lifeExp: 81<br />continent: Europe"],"type":"scatter","mode":"lines","name":"Europe","line":{"width":3.77952755905512,"color":"rgba(199,124,255,1)","dash":"solid"},"hoveron":"points","legendgroup":"Europe","showlegend":false,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":72.1228725612287,"r":13.2835201328352,"b":38.5222083852221,"l":35.8655043586551},"plot_bgcolor":"transparent","paper_bgcolor":"rgba(213,228,235,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"<b> Life Expectancy and GDP per Capita <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":21.9178082191781},"x":0,"xref":"paper"},"xaxis":{"domain":[0,0.492857142857143],"automargin":true,"type":"linear","autorange":false,"range":[2.33084382564856,4.80585074240034],"tickmode":"array","ticktext":["$500","$5,000","$50,000"],"tickvals":[2.69897000433602,3.69897000433602,4.69897000433602],"categoryorder":"array","categoryarray":["$500","$5,000","$50,000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":-6.6417600664176,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.531340805313408,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y2","title":"","hoverformat":".2f"},"annotations":[{"text":"GDP per Capita","x":0.5,"y":-0.031825100318251,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis"},{"text":"Life Expectancy","x":-0.0227322145130364,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis"},{"text":"Africa","x":0.246428571428571,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":18.2648401826484},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Americas","x":0.753571428571429,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":18.2648401826484},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Asia","x":0.246428571428571,"y":0.451948249619482,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":18.2648401826484},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Europe","x":0.753571428571429,"y":0.451948249619482,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":18.2648401826484},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"yaxis":{"domain":[0.548051750380518,1],"automargin":true,"type":"linear","autorange":false,"range":[37.4635,84.7525],"tickmode":"array","ticktext":["40","50","60","70","80"],"tickvals":[40,50,60,70,80],"categoryorder":"array","categoryarray":["40","50","60","70","80"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":-6.6417600664176,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":1.16230801162308,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.492857142857143,"y0":0.548051750380518,"y1":1},{"type":"rect","fillcolor":"transparent","line":{"color":"transparent","width":0.66417600664176,"linetype":"none"},"yref":"paper","xref":"paper","x0":0,"x1":0.492857142857143,"y0":0,"y1":18.2648401826484,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.507142857142857,"x1":1,"y0":0.548051750380518,"y1":1},{"type":"rect","fillcolor":"transparent","line":{"color":"transparent","width":0.66417600664176,"linetype":"none"},"yref":"paper","xref":"paper","x0":0.507142857142857,"x1":1,"y0":0,"y1":18.2648401826484,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.492857142857143,"y0":0,"y1":0.451948249619482},{"type":"rect","fillcolor":"transparent","line":{"color":"transparent","width":0.66417600664176,"linetype":"none"},"yref":"paper","xref":"paper","x0":0,"x1":0.492857142857143,"y0":0,"y1":18.2648401826484,"yanchor":0.451948249619482,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.507142857142857,"x1":1,"y0":0,"y1":0.451948249619482},{"type":"rect","fillcolor":"transparent","line":{"color":"transparent","width":0.66417600664176,"linetype":"none"},"yref":"paper","xref":"paper","x0":0.507142857142857,"x1":1,"y0":0,"y1":18.2648401826484,"yanchor":0.451948249619482,"ysizemode":"pixel"}],"xaxis2":{"type":"linear","autorange":false,"range":[2.33084382564856,4.80585074240034],"tickmode":"array","ticktext":["$500","$5,000","$50,000"],"tickvals":[2.69897000433602,3.69897000433602,4.69897000433602],"categoryorder":"array","categoryarray":["$500","$5,000","$50,000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":-6.6417600664176,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.531340805313408,"showgrid":false,"domain":[0.507142857142857,1],"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y2","title":"","hoverformat":".2f"},"yaxis2":{"type":"linear","autorange":false,"range":[37.4635,84.7525],"tickmode":"array","ticktext":["40","50","60","70","80"],"tickvals":[40,50,60,70,80],"categoryorder":"array","categoryarray":["40","50","60","70","80"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":-6.6417600664176,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.451948249619482],"gridcolor":"rgba(255,255,255,1)","gridwidth":1.16230801162308,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"transparent","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":18.2648401826484}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"17175e85e019":{"x":{},"y":{},"colour":{},"type":"scatter"},"17175773b90c1":{"x":{},"y":{},"colour":{}}},"cur_data":"17175e85e019","visdat":{"17175e85e019":["function (y) ","x"],"17175773b90c1":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>A beautiful plot is just a collection of steps, each simple enough on its own. We have taught you (some of) these steps. Time to start walking on your own.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="getting-started.html">Getting Started</a></div>
<div class="next"><a href="wrangling.html"><span class="header-section-number">2</span> Wrangling</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#visualization"><span class="header-section-number">1</span> Visualization</a></li>
<li>
<a class="nav-link" href="#getting-started-1"><span class="header-section-number">1.1</span> Getting Started</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#how-do-i-code-in-r"><span class="header-section-number">1.1.1</span> How do I code in R?</a></li>
<li><a class="nav-link" href="#terminology"><span class="header-section-number">1.1.2</span> Terminology</a></li>
<li><a class="nav-link" href="#examining-trains"><span class="header-section-number">1.1.3</span> Examining trains</a></li>
<li><a class="nav-link" href="#exploring-tibbles"><span class="header-section-number">1.1.4</span> Exploring tibbles</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#basic-plots"><span class="header-section-number">1.2</span> Basic Plots</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#geom_point"><span class="header-section-number">1.2.1</span> geom_point()</a></li>
<li><a class="nav-link" href="#geom_jitter"><span class="header-section-number">1.2.2</span> geom_jitter()</a></li>
<li><a class="nav-link" href="#geom_line"><span class="header-section-number">1.2.3</span> geom_line()</a></li>
<li><a class="nav-link" href="#geom_histogram"><span class="header-section-number">1.2.4</span> geom_histogram()</a></li>
<li><a class="nav-link" href="#geom_bar"><span class="header-section-number">1.2.5</span> geom_bar()</a></li>
<li><a class="nav-link" href="#geom_smooth"><span class="header-section-number">1.2.6</span> geom_smooth()</a></li>
<li><a class="nav-link" href="#geom_density"><span class="header-section-number">1.2.7</span> geom_density()</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#the-tidyverse"><span class="header-section-number">1.3</span> The Tidyverse</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-wrangling"><span class="header-section-number">1.3.1</span> Data wrangling</a></li>
<li><a class="nav-link" href="#the-pipe-operator"><span class="header-section-number">1.3.2</span> The pipe operator: %&gt;%</a></li>
<li><a class="nav-link" href="#filter-rows"><span class="header-section-number">1.3.3</span> filter() rows</a></li>
<li><a class="nav-link" href="#select-variables"><span class="header-section-number">1.3.4</span> select variables</a></li>
<li><a class="nav-link" href="#slice-and-pull-and"><span class="header-section-number">1.3.5</span> slice() and pull() and []</a></li>
<li><a class="nav-link" href="#arrange"><span class="header-section-number">1.3.6</span> arrange()</a></li>
<li><a class="nav-link" href="#mutate"><span class="header-section-number">1.3.7</span> mutate()</a></li>
<li><a class="nav-link" href="#summarize"><span class="header-section-number">1.3.8</span> summarize()</a></li>
<li><a class="nav-link" href="#statistics-for-distributions"><span class="header-section-number">1.3.9</span> Statistics for distributions</a></li>
<li><a class="nav-link" href="#group_by"><span class="header-section-number">1.3.10</span> group_by()</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#advanced-plots"><span class="header-section-number">1.4</span> Advanced Plots</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#plot-objects"><span class="header-section-number">1.4.1</span> Plot objects</a></li>
<li><a class="nav-link" href="#faceting"><span class="header-section-number">1.4.2</span> Faceting</a></li>
<li><a class="nav-link" href="#stats"><span class="header-section-number">1.4.3</span> Stats</a></li>
<li><a class="nav-link" href="#coordinate-systems"><span class="header-section-number">1.4.4</span> Coordinate Systems</a></li>
<li><a class="nav-link" href="#axis-limits-and-scales"><span class="header-section-number">1.4.5</span> Axis Limits and Scales</a></li>
<li><a class="nav-link" href="#text"><span class="header-section-number">1.4.6</span> Text</a></li>
<li><a class="nav-link" href="#themes"><span class="header-section-number">1.4.7</span> Themes</a></li>
</ul>
</li>
<li><a class="nav-link" href="#summary-1"><span class="header-section-number">1.5</span> Summary</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/PPBDS/primer/blob/master/01-visualization.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/PPBDS/primer/edit/master/01-visualization.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Preceptor’s Primer for Bayesian Data Science</strong>" was written by David Kane. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
